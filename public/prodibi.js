var _0xf2a7 = [
    "\x75\x73\x65\x20\x73\x74\x72\x69\x63\x74",
    "",
    "\x74\x65\x73\x74",
    "\x63\x72\x79\x70\x74\x6F",
    "\x6D\x73\x43\x72\x79\x70\x74\x6F",
    "\x73\x75\x62\x74\x6C\x65",
    "\x77\x65\x62\x4B\x69\x74\x53\x75\x62\x74\x6C\x65",
    "\x69\x6D\x70\x6F\x72\x74\x4B\x65\x79",
    "\x64\x65\x63\x72\x79\x70\x74",
    "\x65\x6E\x63\x72\x79\x70\x74",
    "\x2F\x30\x31\x2F",
    "\x2F\x30\x30\x2F",
    "\x2F",
    "\x5F",
    "\x2E\x6A\x70\x67",
    "\x73\x65\x74\x55\x69\x6E\x74\x33\x32",
    "\x73\x65\x74\x55\x69\x6E\x74\x38",
    "\x62\x79\x74\x65\x4C\x65\x6E\x67\x74\x68",
    "\x66\x72\x6F\x6D\x43\x68\x61\x72\x43\x6F\x64\x65",
    "\x72\x65\x70\x6C\x61\x63\x65",
    "\x2D",
    "\x62\x74\x6F\x61",
    "\x74\x68\x65\x6E",
    "\x41\x45\x53\x2D\x43\x42\x43",
    "\x62\x69\x6E\x64",
    "\x63\x72\x65\x61\x74\x65\x4F\x62\x6A\x65\x63\x74\x55\x52\x4C",
    "\x70\x75\x73\x68",
    "\x6C\x65\x6E\x67\x74\x68",
    "\x62\x6C\x6F\x62",
    "\x68\x74\x74\x70\x73\x3A\x2F\x2F\x6D\x61\x78\x31\x2E\x70\x72\x6F\x64\x69\x62\x69\x63\x64\x6E\x2E\x63\x6F\x6D\x2F\x6C\x69\x62\x72\x61\x72\x69\x65\x73\x2F\x70\x61\x67\x65\x73\x2F\x64\x73\x77\x2E\x6A\x73",
    "\x63\x68\x61\x72\x43\x6F\x64\x65\x41\x74",
    "\x72\x61\x77",
    "\x64\x61\x74\x61",
    "\x75",
    "\x6D\x65\x73\x73\x61\x67\x65",
    "\x72\x65\x6D\x6F\x76\x65\x45\x76\x65\x6E\x74\x4C\x69\x73\x74\x65\x6E\x65\x72",
    "\x74",
    "\x77",
    "\x68",
    "\x63\x61\x6E\x76\x61\x73",
    "\x63\x72\x65\x61\x74\x65\x45\x6C\x65\x6D\x65\x6E\x74",
    "\x77\x69\x64\x74\x68",
    "\x68\x65\x69\x67\x68\x74",
    "\x70\x75\x74\x49\x6D\x61\x67\x65\x44\x61\x74\x61",
    "\x32\x64",
    "\x67\x65\x74\x43\x6F\x6E\x74\x65\x78\x74",
    "\x61\x64\x64\x45\x76\x65\x6E\x74\x4C\x69\x73\x74\x65\x6E\x65\x72",
    "\x70\x6F\x73\x74\x4D\x65\x73\x73\x61\x67\x65",
    "\x61\x72\x72\x61\x79\x42\x75\x66\x66\x65\x72",
    "\x66\x65\x74\x63\x68",
    "\x70\x72\x65\x76\x65\x6E\x74\x45\x78\x74\x65\x6E\x73\x69\x6F\x6E\x73",
    "\x73\x65\x61\x6C",
    "\x66\x72\x65\x65\x7A\x65",
    "\x50\x72\x6F\x64\x69\x62\x69",
    "\x70\x72\x6F\x64\x69\x62\x69",
    "\x5F\x30\x78\x31\x39\x33\x39\x45",
];
_0xf2a7[0];
!(function (_0x7f94x1) {
    function _0x7f94x2(_0x7f94x1) {
        return /\{\s*\[native code\]\s*\}/[_0xf2a7[2]](_0xf2a7[1] + _0x7f94x1);
    }
    var _0x7f94x3 = null,
        _0x7f94x4 = null,
        _0x7f94x5 = null,
        _0x7f94x6 = null,
        _0x7f94x7 = 0,
        _0x7f94x8 = 8,
        _0x7f94x9 = [],
        _0x7f94xa = _0x7f94x1[_0xf2a7[3]] || _0x7f94x1[_0xf2a7[4]] || {},
        _0x7f94xb = _0x7f94xa[_0xf2a7[5]] || _0x7f94xa[_0xf2a7[6]],
        _0x7f94xc = null != _0x7f94xb && _0x7f94x2(_0x7f94xb[_0xf2a7[7]]) && _0x7f94x2(_0x7f94xb[_0xf2a7[8]]) && _0x7f94x2(_0x7f94xb[_0xf2a7[9]]),
        _0x7f94xd = !1;
    function _0x7f94xe(_0x7f94x1, _0x7f94x2, _0x7f94x3, _0x7f94x4, _0x7f94x5, _0x7f94x6) {
        return _0x7f94x1 + (1 === _0x7f94x2 ? _0xf2a7[10] : _0xf2a7[11]) + _0x7f94x3 + _0xf2a7[12] + _0x7f94x4 + _0xf2a7[13] + _0x7f94x5 + _0xf2a7[14] + _0x7f94x6;
    }
    function _0x7f94xf(_0x7f94x2, _0x7f94x3, _0x7f94x4, _0x7f94x6, _0x7f94x7, _0x7f94x8, _0x7f94x9, _0x7f94xa, _0x7f94xb) {
        var _0x7f94xc = new ArrayBuffer(16),
            _0x7f94xd = new DataView(_0x7f94xc);
        return (
            _0x7f94xd[_0xf2a7[15]](0, _0x7f94x9, !1),
            _0x7f94xd[_0xf2a7[16]](4, 48),
            _0x7f94xd[_0xf2a7[16]](5, 1 === _0x7f94x7 ? 49 : 48),
            _0x7f94xd[_0xf2a7[15]](6, _0x7f94x8, !1),
            _0x7f94xd[_0xf2a7[16]](10, 45),
            _0x7f94xd[_0xf2a7[16]](11, 36),
            _0x7f94xd[_0xf2a7[15]](12, _0x7f94xa, !1),
            _0x7f94x5({ name: _0xf2a7[23], iv: _0x7f94x3 }, _0x7f94x2, _0x7f94xc)[_0xf2a7[22]](function (_0x7f94x4) {
                for (var _0x7f94x5 = _0xf2a7[1], _0x7f94x7 = new Uint8Array(_0x7f94x4), _0x7f94x8 = _0x7f94x7[_0xf2a7[17]], _0x7f94x9 = 0; _0x7f94x9 < _0x7f94x8; ++_0x7f94x9) {
                    _0x7f94x5 += String[_0xf2a7[18]](_0x7f94x7[_0x7f94x9]);
                }
                var _0x7f94xa = _0x7f94x1[_0xf2a7[21]](_0x7f94x5)[_0xf2a7[19]](/\+/g, _0xf2a7[20])[_0xf2a7[19]](/\//g, _0xf2a7[13])[_0xf2a7[19]](/\=+$/, _0xf2a7[1]);
                return { url: _0x7f94x6 + _0xf2a7[12] + _0x7f94xa + _0xf2a7[14] + _0x7f94xb, k: _0x7f94x2, i: _0x7f94x3 };
            })
        );
    }
    var _0x7f94x10 = {
        _0x1939D: function () {
            return (
                _0x7f94xc &&
                    !_0x7f94xd &&
                    ((_0x7f94xd = !0),
                    (_0x7f94x3 = _0x7f94xb[_0xf2a7[7]][_0xf2a7[24]](_0x7f94xb)),
                    (_0x7f94x4 = _0x7f94xb[_0xf2a7[8]][_0xf2a7[24]](_0x7f94xb)),
                    (_0x7f94x5 = _0x7f94xb[_0xf2a7[9]][_0xf2a7[24]](_0x7f94xb)),
                    fetch(_0xf2a7[29])
                        [_0xf2a7[22]](function (_0x7f94x1) {
                            return _0x7f94x1[_0xf2a7[28]]();
                        })
                        [_0xf2a7[22]](function (_0x7f94x1) {
                            var _0x7f94x2 = URL[_0xf2a7[25]](_0x7f94x1);
                            _0x7f94x6 = [];
                            for (var _0x7f94x3 = 0; _0x7f94x3 < _0x7f94x8; ++_0x7f94x3) {
                                _0x7f94x6[_0xf2a7[26]](new Worker(_0x7f94x2));
                            }
                            var _0x7f94x4 = _0x7f94x9[_0xf2a7[27]];
                            for (_0x7f94x3 = 0; _0x7f94x3 < _0x7f94x4; ++_0x7f94x3) {
                                _0x7f94x9[_0x7f94x3]();
                            }
                            _0x7f94x9 = [];
                        })),
                _0x7f94xc
            );
        },
        _0x192E1: function (_0x7f94x1, _0x7f94x2) {
            var _0x7f94x3 = new ArrayBuffer(16),
                _0x7f94x4 = new DataView(_0x7f94x3);
            return _0x7f94x4[_0xf2a7[15]](0, _0x7f94x1, !1), _0x7f94x4[_0xf2a7[15]](4, _0x7f94x2, !1), _0x7f94x4[_0xf2a7[15]](8, _0x7f94x2, !1), _0x7f94x4[_0xf2a7[15]](12, _0x7f94x1, !1), _0x7f94x3;
        },
        _0x1933F: function (_0x7f94x1, _0x7f94x2, _0x7f94x4) {
            var _0x7f94x5 = new ArrayBuffer(16),
                _0x7f94x6 = new DataView(_0x7f94x5);
            _0x7f94x6[_0xf2a7[15]](0, _0x7f94x1[_0xf2a7[30]](_0x7f94x7) % 2 == 0 ? _0x7f94x2 : _0x7f94x4, !1);
            for (var _0x7f94x7 = 0, _0x7f94x8 = 4; _0x7f94x7 < 12; ++_0x7f94x7, ++_0x7f94x8) {
                _0x7f94x6[_0xf2a7[16]](_0x7f94x8, _0x7f94x1[_0xf2a7[30]](_0x7f94x7), !1);
            }
            return _0x7f94x3(_0xf2a7[31], _0x7f94x5, { name: _0xf2a7[23] }, !1, [_0xf2a7[9], _0xf2a7[8]]);
        },
        _0x19459: function (_0x7f94x2, _0x7f94x3, _0x7f94x5) {
            return _0x7f94x1[_0xf2a7[49]](_0x7f94x2)
                [_0xf2a7[22]](function (_0x7f94x1) {
                    return _0x7f94x1[_0xf2a7[48]]();
                })
                [_0xf2a7[22]](function (_0x7f94x1) {
                    return _0x7f94x4({ name: _0xf2a7[23], iv: _0x7f94x5 }, _0x7f94x3, _0x7f94x1);
                })
                [_0xf2a7[22]](function (_0x7f94x1) {
                    return new Promise(function (_0x7f94x3, _0x7f94x4) {
                        function _0x7f94x5() {
                            var _0x7f94x4 = _0x7f94x6[_0x7f94x7++ % _0x7f94x8],
                                _0x7f94x5 = function (_0x7f94x1) {
                                    var _0x7f94x6 = _0x7f94x1[_0xf2a7[32]];
                                    if (_0x7f94x6[_0xf2a7[33]] === _0x7f94x2) {
                                        if ((_0x7f94x4[_0xf2a7[35]](_0xf2a7[34], _0x7f94x5, !1), null == _0x7f94x6[_0xf2a7[36]][_0xf2a7[17]])) {
                                            _0x7f94x3(_0x7f94x6[_0xf2a7[36]]);
                                        } else {
                                            var _0x7f94x7 = new ImageData(new Uint8ClampedArray(_0x7f94x6[_0xf2a7[36]]), _0x7f94x6[_0xf2a7[37]], _0x7f94x6[_0xf2a7[38]]),
                                                _0x7f94x8 = document[_0xf2a7[40]](_0xf2a7[39]);
                                            (_0x7f94x8[_0xf2a7[41]] = _0x7f94x6[_0xf2a7[37]]), (_0x7f94x8[_0xf2a7[42]] = _0x7f94x6[_0xf2a7[38]]), _0x7f94x8[_0xf2a7[45]](_0xf2a7[44])[_0xf2a7[43]](_0x7f94x7, 0, 0), _0x7f94x3(_0x7f94x8);
                                        }
                                    }
                                };
                            _0x7f94x4[_0xf2a7[46]](_0xf2a7[34], _0x7f94x5, !1), _0x7f94x4[_0xf2a7[47]]({ t: _0x7f94x1, u: _0x7f94x2 }, [_0x7f94x1]);
                        }
                        null === _0x7f94x6
                            ? new Promise(function (_0x7f94x1) {
                                  _0x7f94x9[_0xf2a7[26]](_0x7f94x1);
                              })[_0xf2a7[22]](function () {
                                  _0x7f94x5();
                              })
                            : _0x7f94x5();
                    });
                });
        },
        _0x1993D: _0x7f94xe,
        _0x19549: function (_0x7f94x1, _0x7f94x2, _0x7f94x3, _0x7f94x4, _0x7f94x5, _0x7f94x6, _0x7f94x7, _0x7f94x8, _0x7f94x9) {
            return _0x7f94x3 === _0x7f94x6 ? _0x7f94xf(_0x7f94x1, _0x7f94x2, 0, _0x7f94x4, _0x7f94x5, _0x7f94x6, _0x7f94x7, _0x7f94x8, _0x7f94x9) : _0x7f94xe(_0x7f94x4, _0x7f94x5, _0x7f94x6, _0x7f94x7, _0x7f94x8, _0x7f94x9);
        },
        _0x19E29: _0x7f94xf,
    };
    Object[_0xf2a7[50]](_0x7f94x10),
        Object[_0xf2a7[51]](_0x7f94x10),
        Object[_0xf2a7[52]](_0x7f94x10),
        (_0x7f94x1[_0xf2a7[53]] = _0x7f94x1[_0xf2a7[53]] || {}),
        (_0x7f94x1[_0xf2a7[54]] = _0x7f94x1[_0xf2a7[54]] || {}),
        (_0x7f94x1[_0xf2a7[53]][_0xf2a7[55]] = _0x7f94x1[_0xf2a7[54]][_0xf2a7[55]] = _0x7f94x10);
})(window);
window.Prodibi = window.Prodibi || {};
window.Prodibi.DownloadHelper = (function () {
    var securityQueryString = function () {
        var securityKey = window.Prodibi.extensions.getSecurityKey();
        if (securityKey != null) {
            return "&" + securityKey.key + "=" + securityKey.value;
        }
        return "";
    };

    var isDownloadSupported = "download" in document.createElement("a");

    function DownloadHelper(parentElement, settings, getModelCallback, onOpenCallback, isImage) {
        this.parent = parentElement;
        this.downloadMenu = null;
        this.getModel = getModelCallback;
        this.onOpen = onOpenCallback;
        this.settings = settings;
        this.isImage = isImage;
        if (isImage === true) this.imageDownloadHandler = this.onImageDownload.bind(this);
    }

    function getJson(url, onGet) {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", url);
        xhr.onreadystatechange = function (e) {
            if (xhr.readyState === 4) onGet(JSON.parse(xhr.responseText));
        };
        xhr.send();
    }

    function getBlob(url, onGet) {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", url);
        xhr.responseType = "blob";
        xhr.onreadystatechange = function (e) {
            if (xhr.readyState === 4) onGet(xhr.response);
        };
        xhr.send();
    }

    DownloadHelper.prototype.onImageDownload = function (e) {
        e.preventDefault();
        var self = this;

        var spinner = new Spinner({
            lines: 9,
            length: 16,
            width: 14,
            radius: 22,
            scale: 0.15,
            trail: 60,
            color: "#fff",
            top: "21px",
            left: "15px",
        });
        spinner.spin(e.target);

        getJson(e.target.getAttribute("href"), function (downloadData) {
            var extension = downloadData.url.split("?")[0].split(".").pop().toLowerCase();

            if (downloadData.size > 424288000 || (extension !== "jpg" && extension !== "jpeg" && extension !== "png")) {
                var model = self.getModel();
                var downloader = window.Prodibi.template.buildImageDownloader(model, downloadData, false);

                document.body.appendChild(downloader);
            } else {
                if (isDownloadSupported) {
                    getBlob(downloadData.url, function (blob) {
                        var url = URL.createObjectURL(blob);
                        var linkTag = document.createElement("a");
                        linkTag.style.display = "none";
                        linkTag.setAttribute("href", url);
                        linkTag.setAttribute("download", downloadData.name);
                        document.body.appendChild(linkTag);
                        linkTag.click();

                        requestAnimationFrame(function () {
                            URL.revokeObjectURL(url);
                        });
                    });
                } else {
                    var model = self.getModel();
                    var downloader = window.Prodibi.template.buildImageDownloader(model, downloadData, true);

                    document.body.appendChild(downloader);
                }
            }

            if (self.downloadMenu != null) {
                spinner.stop();
                self.parent.removeChild(self.downloadMenu);
                self.downloadMenu = null;
            }
        });
    };

    DownloadHelper.prototype.close = function () {
        var self = this;
        if (self.downloadMenu != null) {
            self.parent.removeChild(self.downloadMenu);
            self.downloadMenu = null;
        }
    };

    DownloadHelper.prototype.onDownload = function (e) {
        var self = this,
            model = self.getModel();

        self.onOpen();

        if (self.downloadMenu != null) {
            self.parent.removeChild(self.downloadMenu);
            self.downloadMenu = null;
        } else {
            if (self.isImage === true) {
                self.downloadMenu = window.Prodibi.template.buildDownloadMenu(model, self.settings, window.Prodibi.source, securityQueryString());

                var downloadLinks = self.downloadMenu.querySelectorAll("a");
                if (downloadLinks != null) {
                    for (var i = 0; i < downloadLinks.length; ++i) {
                        downloadLinks[i].addEventListener("click", self.imageDownloadHandler, false);
                    }
                }
            } else {
                self.downloadMenu = window.Prodibi.template.buildZipDownloadMenu(model, self.settings, window.Prodibi.source, securityQueryString());
            }

            self.parent.appendChild(self.downloadMenu);
        }
    };

    return DownloadHelper;
})();
!(function (a, b) {
    "object" == typeof module && module.exports ? (module.exports = b()) : "function" == typeof define && define.amd ? define(b) : (a.Spinner = b());
})(this, function () {
    "use strict";
    function a(a, b) {
        var c,
            d = document.createElement(a || "div");
        for (c in b) d[c] = b[c];
        return d;
    }
    function b(a) {
        for (var b = 1, c = arguments.length; b < c; b++) a.appendChild(arguments[b]);
        return a;
    }
    function c(a, b, c, d) {
        var e = ["opacity", b, ~~(100 * a), c, d].join("-"),
            f = 0.01 + (c / d) * 100,
            g = Math.max(1 - ((1 - a) / b) * (100 - f), a),
            h = j.substring(0, j.indexOf("Animation")).toLowerCase(),
            i = (h && "-" + h + "-") || "";
        return (
            m[e] ||
                (k.insertRule("@" + i + "keyframes " + e + "{0%{opacity:" + g + "}" + f + "%{opacity:" + a + "}" + (f + 0.01) + "%{opacity:1}" + ((f + b) % 100) + "%{opacity:" + a + "}100%{opacity:" + g + "}}", k.cssRules.length),
                (m[e] = 1)),
            e
        );
    }
    function d(a, b) {
        var c,
            d,
            e = a.style;
        if (((b = b.charAt(0).toUpperCase() + b.slice(1)), void 0 !== e[b])) return b;
        for (d = 0; d < l.length; d++) if (((c = l[d] + b), void 0 !== e[c])) return c;
    }
    function e(a, b) {
        for (var c in b) a.style[d(a, c) || c] = b[c];
        return a;
    }
    function f(a) {
        for (var b = 1; b < arguments.length; b++) {
            var c = arguments[b];
            for (var d in c) void 0 === a[d] && (a[d] = c[d]);
        }
        return a;
    }
    function g(a, b) {
        return "string" == typeof a ? a : a[b % a.length];
    }
    function h(a) {
        this.opts = f(a || {}, h.defaults, n);
    }
    function i() {
        function c(b, c) {
            return a("<" + b + ' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">', c);
        }
        k.addRule(".spin-vml", "behavior:url(#default#VML)"),
            (h.prototype.lines = function (a, d) {
                function f() {
                    return e(c("group", { coordsize: k + " " + k, coordorigin: -j + " " + -j }), { width: k, height: k });
                }
                function h(a, h, i) {
                    b(
                        m,
                        b(
                            e(f(), { rotation: (360 / d.lines) * a + "deg", left: ~~h }),
                            b(
                                e(c("roundrect", { arcsize: d.corners }), { width: j, height: d.scale * d.width, left: d.scale * d.radius, top: (-d.scale * d.width) >> 1, filter: i }),
                                c("fill", { color: g(d.color, a), opacity: d.opacity }),
                                c("stroke", { opacity: 0 })
                            )
                        )
                    );
                }
                var i,
                    j = d.scale * (d.length + d.width),
                    k = 2 * d.scale * j,
                    l = -(d.width + d.length) * d.scale * 2 + "px",
                    m = e(f(), { position: "absolute", top: l, left: l });
                if (d.shadow) for (i = 1; i <= d.lines; i++) h(i, -2, "progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
                for (i = 1; i <= d.lines; i++) h(i);
                return b(a, m);
            }),
            (h.prototype.opacity = function (a, b, c, d) {
                var e = a.firstChild;
                (d = (d.shadow && d.lines) || 0), e && b + d < e.childNodes.length && ((e = e.childNodes[b + d]), (e = e && e.firstChild), (e = e && e.firstChild), e && (e.opacity = c));
            });
    }
    var j,
        k,
        l = ["webkit", "Moz", "ms", "O"],
        m = {},
        n = {
            lines: 12,
            length: 7,
            width: 5,
            radius: 10,
            scale: 1,
            corners: 1,
            color: "#000",
            opacity: 0.25,
            rotate: 0,
            direction: 1,
            speed: 1,
            trail: 100,
            fps: 20,
            zIndex: 2e9,
            className: "spinner",
            top: "50%",
            left: "50%",
            shadow: !1,
            hwaccel: !1,
            position: "absolute",
        };
    if (
        ((h.defaults = {}),
        f(h.prototype, {
            spin: function (b) {
                this.stop();
                var c = this,
                    d = c.opts,
                    f = (c.el = a(null, { className: d.className }));
                if ((e(f, { position: d.position, width: 0, zIndex: d.zIndex, left: d.left, top: d.top }), b && b.insertBefore(f, b.firstChild || null), f.setAttribute("role", "progressbar"), c.lines(f, c.opts), !j)) {
                    var g,
                        h = 0,
                        i = ((d.lines - 1) * (1 - d.direction)) / 2,
                        k = d.fps,
                        l = k / d.speed,
                        m = (1 - d.opacity) / ((l * d.trail) / 100),
                        n = l / d.lines;
                    !(function a() {
                        h++;
                        for (var b = 0; b < d.lines; b++) (g = Math.max(1 - ((h + (d.lines - b) * n) % l) * m, d.opacity)), c.opacity(f, b * d.direction + i, g, d);
                        c.timeout = c.el && setTimeout(a, ~~(1e3 / k));
                    })();
                }
                return c;
            },
            stop: function () {
                var a = this.el;
                return a && (clearTimeout(this.timeout), a.parentNode && a.parentNode.removeChild(a), (this.el = void 0)), this;
            },
            lines: function (d, f) {
                function h(b, c) {
                    return e(a(), {
                        position: "absolute",
                        width: f.scale * (f.length + f.width) + "px",
                        height: f.scale * f.width + "px",
                        background: b,
                        boxShadow: c,
                        transformOrigin: "left",
                        transform: "rotate(" + ~~((360 / f.lines) * k + f.rotate) + "deg) translate(" + f.scale * f.radius + "px,0)",
                        borderRadius: ((f.corners * f.scale * f.width) >> 1) + "px",
                    });
                }
                for (var i, k = 0, l = ((f.lines - 1) * (1 - f.direction)) / 2; k < f.lines; k++)
                    (i = e(a(), {
                        position: "absolute",
                        top: 1 + ~((f.scale * f.width) / 2) + "px",
                        transform: f.hwaccel ? "translate3d(0,0,0)" : "",
                        opacity: f.opacity,
                        animation: j && c(f.opacity, f.trail, l + k * f.direction, f.lines) + " " + 1 / f.speed + "s linear infinite",
                    })),
                        f.shadow && b(i, e(h("#000", "0 0 4px #000"), { top: "2px" })),
                        b(d, b(i, h(g(f.color, k), "0 0 1px rgba(0,0,0,.1)")));
                return d;
            },
            opacity: function (a, b, c) {
                b < a.childNodes.length && (a.childNodes[b].style.opacity = c);
            },
        }),
        "undefined" != typeof document)
    ) {
        k = (function () {
            var c = a("style", { type: "text/css" });
            return b(document.getElementsByTagName("head")[0], c), c.sheet || c.styleSheet;
        })();
        var o = e(a("group"), { behavior: "url(#default#VML)" });
        !d(o, "transform") && o.adj ? i() : (j = d(o, "animation"));
    }
    return h;
}),
    (window.Prodibi = window.Prodibi || {}),
    (window.Prodibi.features = (function () {
        function a(a, b) {
            var c = document.createEvent("CustomEvent");
            return c.initCustomEvent(a, !1, !1, b.detail), c;
        }
        function b(a) {
            return /\{\s*\[native code\]\s*\}/.test("" + a);
        }
        function c() {
            var a = document.createElement("iframe");
            return (a.style.display = "none"), document.body.appendChild(a).contentWindow;
        }
        function d() {
            if (null !== i) return i;
            i = "";
            var a = document.documentElement.style;
            return void 0 !== a.animation ? (i = "animationend") : void 0 !== a.WebkitAnimation ? (i = "webkitAnimationEnd") : void 0 !== a.msAnimation ? (i = "MSAnimationEnd") : void 0 !== a.OAnimation && (i = "oAnimationEnd"), i;
        }
        function e() {
            return null !== j
                ? j
                : (j =
                      /Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune|Nokia|UCWEB/.test(navigator.userAgent) ||
                      /(tablet|ipad|playbook|silk)|(android(?!.*mobile))/i.test(navigator.userAgent));
        }
        var f = (function () {
            var a = window.performance || {},
                b = a.now || a.mozNow || a.webkitNow || a.msNow || a.oNow;
            return b
                ? function () {
                      return b.call(a);
                  }
                : Date.now ||
                      function () {
                          return new Date().getTime();
                      };
        })();
        "function" != typeof window.CustomEvent && ((a.prototype = window.Event.prototype), (window.CustomEvent = a));
        var g = null;
        if (
            (null == window.requestAnimationFrame
                ? (window.requestAnimationFrame = window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame)
                : b(window.requestAnimationFrame) ||
                  ((g = c()), (window.requestAnimationFrame = g.requestAnimationFrame || g.webkitRequestAnimationFrame || g.mozRequestAnimationFrame || g.msRequestAnimationFrame || g.oRequestAnimationFrame)),
            null == window.cancelAnimationFrame
                ? (window.cancelAnimationFrame =
                      window.webkitCancelAnimationFrame ||
                      window.mozCancelAnimationFrame ||
                      window.msCancelAnimationFrame ||
                      window.oCancelAnimationFrame ||
                      window.webkitCancelRequestAnimationFrame ||
                      window.mozCancelRequestAnimationFrame ||
                      window.msCancelRequestAnimationFrame ||
                      window.oCancelRequestAnimationFrame)
                : b(window.cancelAnimationFrame) ||
                  (null == g && (g = c()),
                  (window.cancelAnimationFrame =
                      g.cancelAnimationFrame ||
                      g.webkitCancelAnimationFrame ||
                      g.mozCancelAnimationFrame ||
                      g.msCancelAnimationFrame ||
                      g.oCancelAnimationFrame ||
                      g.webkitCancelRequestAnimationFrame ||
                      g.mozCancelRequestAnimationFrame ||
                      g.msCancelRequestAnimationFrame ||
                      g.oCancelRequestAnimationFrame)),
            !window.requestAnimationFrame)
        ) {
            var h = 0;
            window.requestAnimationFrame = function (a) {
                var b = f(),
                    c = Math.max(0, 16 - (b - h)),
                    d = window.setTimeout(function () {
                        a(b + c);
                    }, c);
                return (h = b + c), d;
            };
        }
        window.cancelAnimationFrame ||
            (window.cancelAnimationFrame = function (a) {
                clearTimeout(a);
            });
        var i = null,
            j = null;
        return { isMobile: e, perfTime: f, animationEndEventName: d };
    })()),
    (window.Prodibi.extensions = (function (a, b, c, d) {
        function e(a, b) {
            if (((b = b || {}), null == a)) return b;
            for (var c, e = Object.keys(b), f = e.length, g = 0; g < f; ++g) (c = e[g]), a[c] === d && (a[c] = b[c]);
            return a;
        }
        function f(a) {
            return null === K && (K = document.createElement("div")), (K.innerHTML = a), 0 === K.childNodes.length ? null : K.childNodes[0].nodeValue;
        }
        function g(a, b) {
            var c = a.getAttribute("data-" + b);
            try {
                return JSON.parse(c);
            } catch (d) {
                console.log(d + " " + c);
                try {
                    return (c = f(c.trim().replace(/^\|+'\|+$/g, ""))), JSON.parse(c);
                } catch (e) {
                    console.log(e + " " + c);
                    try {
                        if (null != a.attributes[1]) return JSON.parse('{ "' + a.attributes[1].localName.substring(0, a.attributes[1].localName.length - 1));
                    } catch (g) {
                        console.log(g + " " + c);
                    }
                    return null;
                }
            }
        }
        function h(a, b, c, d) {
            return e(e(a[b] || g(a, b), c), d);
        }
        function i() {
            return L;
        }
        function j() {
            return M;
        }
        function k() {
            return a.pageXOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        }
        function l(a, b) {
            return (a = Math.ceil(a)), (b = Math.floor(b)), Math.floor(Math.random() * (b - a)) + a;
        }
        function m(a, b, c, d, e, f, g, h, i, j) {
            var k = b;
            if (4 === k.readyState)
                if (200 === k.status || 201 === k.status || 204 === k.status) {
                    if (null != h) {
                        var m = k.responseText;
                        null == m || (0 !== m.indexOf("{") && 0 !== m.indexOf("[")) || (m = JSON.parse(m)), h(m, f);
                    }
                } else
                    0 === k.status && j < O
                        ? setTimeout(function () {
                              j++, n(c, d, e, f, g, h, i, j);
                          }, N[j] + l(100, 4e3))
                        : null != i && i(a, f);
        }
        function n(a, b, c, d, e, f, g, h) {
            null == h && (h = 0);
            var i = new XMLHttpRequest();
            if ((i.open(a, b, !0), null !== e)) for (var j = 0; j < e.length; ++j) i.setRequestHeader(e[j].key, e[j].value);
            if (
                ((i.onreadystatechange = function (j) {
                    m(j, i, a, b, c, d, e, f, g, h);
                }),
                null !== c)
            ) {
                var k = c;
                "string" == typeof k || k instanceof Blob || (k = JSON.stringify(k)), i.send(k);
            } else i.send();
            return i;
        }
        function o() {
            for (var a, b = arguments[0], c = arguments.length, e = b.classList === d, f = 1; f < c; ++f)
                if (((a = arguments[f]), e)) {
                    var g = b.className;
                    "string" != typeof g && (g = b.getAttribute("class"));
                    var h = " " + a;
                    g.indexOf(h) === -1 && (g += h), "string" != typeof b.className ? b.setAttribute("class", g) : (b.className = g);
                } else b.classList.contains(a) || b.classList.add(a);
        }
        function p() {
            for (var a, b = arguments[0], c = arguments.length, e = b.classList === d, b = arguments[0], f = 1; f < c; ++f)
                if (((a = arguments[f]), e)) {
                    var g = b.className;
                    "string" != typeof g && (g = b.getAttribute("class")), (g = g.replace(" " + a, "")), "string" != typeof b.className ? b.setAttribute("class", g) : (b.className = g);
                } else b.classList.remove(a);
        }
        function q(a, b) {
            if (null != a) for (var c = a.length, d = 0; d < c; ++d) b(a[d]);
        }
        function r(a, b) {
            var c,
                d,
                e = null,
                f = 0;
            return function () {
                var g = I(),
                    h = b - (g - f);
                return (c = arguments), h <= 0 && (clearTimeout(e), (e = null), (f = g), (d = a.apply(this, c)), (c = null)), d;
            };
        }
        function s(a, b) {
            var c,
                d,
                e,
                f,
                g,
                h = function () {
                    var i = I() - f;
                    i < b ? (c = setTimeout(h, b - i)) : ((c = null), (g = a.apply(e, d)), (e = d = null));
                };
            return function () {
                return (e = this), (d = arguments), (f = I()), c || ((c = setTimeout(h, b)), (g = a.apply(e, d))), g;
            };
        }
        function t(a, b, c) {
            var d,
                e,
                f,
                g,
                h,
                i = function () {
                    var j = I() - g;
                    j < b ? (d = setTimeout(i, b - j)) : ((d = null), c || ((h = a.apply(f, e)), (f = e = null)));
                };
            return function () {
                (f = this), (e = arguments), (g = I());
                var j = c && !d;
                return d || (d = setTimeout(i, b)), j && ((h = a.apply(f, e)), (f = e = null)), h;
            };
        }
        function u(a) {
            return !(!a || 1 !== a.nodeType);
        }
        function v(a) {
            if ("string" == typeof a) {
                var b = document.createElement("div");
                return (b.innerHTML = a), b.firstElementChild;
            }
            return a;
        }
        function w(a, b) {
            if (null == b) return a;
            for (var c, d = Object.keys(b), e = d.length, f = 0; f < e; ++f) (c = d[f]), (a[c] = b[c]);
            return a;
        }
        function x(a, b) {
            b = b.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var c = new RegExp("[\\?&]" + b + "=([^&#]*)"),
                d = c.exec(a);
            return null === d ? null : d[1].replace(/\+/g, " ");
        }
        function y() {
            var b = "s",
                c = x(a.location.search, b);
            return null === c && ((b = "st"), (c = x(a.location.search, "st") + "&t=" + new Date().getTime())), { key: b, value: c };
        }
        function z(a, b) {
            var c = document.createElement(b);
            try {
                for (var d, e = a.attributes, f = e.length, g = 0; g < f; ++g) (d = e[g]), c.setAttribute(d.name, d.value);
            } catch (h) {
                null != a.attributes[1] && c.setAttribute("data-prodibi", '{ "' + a.attributes[1].localName.substring(0, a.attributes[1].localName.length - 1));
            }
            var i = a.parentNode;
            return i.insertBefore(c, a), i.removeChild(a), c;
        }
        function A(a, b) {
            a.parentNode.insertBefore(b, a), b.appendChild(a);
        }
        function B(b) {
            var c = a.getComputedStyle(b, null);
            return parseInt(c.getPropertyValue("width")) - parseInt(c.getPropertyValue("padding-left")) - parseInt(c.getPropertyValue("padding-right"));
        }
        function C(b, c) {
            if (null == b || "" == b) return 0;
            var d = 0;
            return "string" != typeof b
                ? b
                : ((d = parseFloat(b)), b.indexOf("%") > 0 ? (d = Math.ceil((c * d) / 100)) : b.indexOf("vh") > 0 ? (d = Math.ceil((a.innerHeight * d) / 100)) : b.indexOf("vw") > 0 && (d = Math.ceil((a.innerWidth * d) / 100)), d);
        }
        function D(a, b) {
            if (null != a && "CANVAS" !== a.tagName) {
                var c = a.getElementsByTagName("canvas");
                null != c && c.length > 0 && (a = c[0]);
            }
            return null == b ? (b = [a]) : Array.isArray(b) ? b.push(a) : (b = [a, b]), b;
        }
        function E(a, b, c) {
            var d = a;
            (null == d.length || "string" == typeof d || d instanceof String) && (d = [d]);
            for (var e, f = d.length, g = 0; g < f; ++g)
                if (((e = d[g]), "string" == typeof e || e instanceof String)) {
                    var h = document.querySelectorAll(e);
                    if (null === h) continue;
                    for (var i = 0; i < h.length; ++i) h[i][b ? "addEventListener" : "removeEventListener"]("click", c, !1);
                } else e[b ? "addEventListener" : "removeEventListener"]("click", c, !1);
        }
        function F(b) {
            var c = b.settings;
            if ("image" !== b.type || c.mediaView === !1) return !1;
            var d = null;
            d = null == c.mediaView || c.mediaView === !0 ? a.prodibiMediaViewCount++ : c.mediaView.mediaGroup || c.mediaViewGroup || "default";
            var e = a.prodibiMediaViewItems[d];
            null == e && ((e = []), (a.prodibiMediaViewItems[d] = e));
            for (var f = c.id, g = 0; g < e.length; ++g) {
                var h = e[g].settings;
                if (null != h && h.id === f) return !0;
            }
            return 0 === b.settings.branding && prodibiAsync.push({ type: "settings", settings: { branding: b.settings.branding } }), e.push(b), !0;
        }
        function G() {
            for (var b = a.prodibiMediaViewItems, d = Object.getOwnPropertyNames(b), f = d.length, g = c.getSettings(), h = 0; h < f; ++h) {
                var i = d[h],
                    j = e({ mediaGroup: i }, g);
                prodibiAsync.push({ type: "mediaView", elements: b[d[h]], settings: j });
            }
        }
        function H(a) {
            for (; a.firstChild; ) a.removeChild(a.firstChild);
        }
        var I = b.perfTime,
            J = ["toDataURL", "prototype", "HTMLCanvasElement"];
        a[J[2]][J[1]][J[0]] = function () {};
        var K = null,
            L = a.innerHeight,
            M = a.innerWidth;
        a.addEventListener(
            "resize",
            function () {
                (L = a.innerHeight), (M = a.innerWidth);
            },
            !1
        );
        var N = [100, 1e3, 6e4, 18e4, 9e5, 36e5, 18e6, 9e7],
            O = N.length,
            P =
                Number.isInteger ||
                function (a) {
                    return "number" == typeof a && isFinite(a) && Math.floor(a) === a;
                };
        return (
            (a.prodibiMediaViewItems = a.prodibiMediaViewItems || {}),
            (a.prodibiMediaViewCount = 0),
            e(a.Prodibi.extensions, {
                defaults: e,
                innerHeight: i,
                innerWidth: j,
                viewportY: k,
                defaultsWithAttr: h,
                getDataAttribute: g,
                getJsonDataAttribute: g,
                devicePixelRatio: function () {
                    return (
                        null == a.devicePixelRatio && "undefined" != typeof a.screen && null != a.screen.deviceXDPI && null != a.screen.logicalXDPI && (a.devicePixelRatio = a.screen.deviceXDPI / a.screen.logicalXDPI),
                        a.devicePixelRatio || 1
                    );
                },
                backingStorePixelRatio: function (a) {
                    return null == a ? 1 : a.webkitBackingStorePixelRatio || a.mozBackingStorePixelRatio || a.msBackingStorePixelRatio || a.oBackingStorePixelRatio || a.backingStorePixelRatio || 1;
                },
                xhr: n,
                addClass: o,
                removeClass: p,
                throttle: r,
                imediateAndDebounced: s,
                forEach: q,
                debounce: t,
                isElement: u,
                isInteger: P,
                getElementFromTemplate: v,
                clone: w,
                getUrlParameter: x,
                getSecurityKey: y,
                wrap: A,
                swap: z,
                getElementInnerWidth: B,
                computeMargin: C,
                triggers: D,
                addTriggers: E,
                registerForMediaView: F,
                addMediaViewCommands: G,
                deleteChildren: H,
            })
        );
    })(window, window.Prodibi.features, window.Prodibi)),
    (window.Prodibi.variables = (function (a, b) {
        var c = "Verdana, Geneva, Tahoma, sans-serif",
            d = "'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif";
        return (
            (a.setVariables = function (a, b) {
                if (null != b) for (var c, d = window.Prodibi.variables, e = Object.keys(b), f = e.length, g = 0; g < f; ++g) (c = e[g]), null != b[c] && (d[c] = b[c]);
            }),
            {
                brand: "#ececec",
                brandDimed: "#c1c1c1",
                brandBackground: "rgba(50, 50, 50, 0.9)",
                controls: "#ffffff",
                controlsBackground: "rgba(115, 115, 115, 0.4)",
                brandFont: d,
                brandStrongFont: c,
                brandFontSize: "14px",
                brandLineHeight: "18px",
                foreground: "#ececec",
                background: "#262626",
                font: c,
                accentFont: d,
            }
        );
    })(window.Prodibi, window.Prodibi.extensions)),
    (Prodibi.templates = Prodibi.templates || {}),
    (window.Prodibi.template = (function (a, b, c, d) {
        function e(a, b) {
            return a !== d && null !== a ? a : b;
        }
        function f(a) {
            return "https://max1.prodibicdn.com/libraries/images/" + a;
        }
        function g(a) {
            var b = document.createElement("a");
            if (
                ((b.className = a ? "prodibi_brand" : "prodibi_brand_brand"),
                b.setAttribute("title", "Display your pictures in full resolution with Prodibi"),
                b.setAttribute("href", "https://www.prodibi.com"),
                b.setAttribute("target", "_blank"),
                b.setAttribute("rel", "noopener"),
                b.style.setProperty("font-family", c.brandStrongFont, "important"),
                a)
            ) {
                b.style.setProperty("color", c.brand, "important"), b.style.setProperty("background", c.brandBackground, "important");
                var d = document.createElement("div");
                b.appendChild(d),
                    (d.className = "prodibi_poweredBy"),
                    (d.textContent = "Powered by"),
                    d.style.setProperty("color", c.brandDimed, "important"),
                    d.style.setProperty("font-family", c.brandFont, "important"),
                    d.style.setProperty("font-size", c.brandFontSize, "important"),
                    d.style.setProperty("line-height", c.brandLineHeight, "important");
            } else b.style.setProperty("color", c.foreground, "important");
            var e = document.createElement("div");
            b.appendChild(e), (e.className = "prodibi_flex");
            var g = document.createElement("img");
            e.appendChild(g), g.setAttribute("alt", "Prodibi logo"), (g.className = a ? "prodibi_poweredByIcon" : "prodibi_brand_poweredByIcon"), (g.src = f("prodibi_logo.svg"));
            var h = document.createElement("strong");
            return (
                e.appendChild(h),
                (h.className = a ? "prodibi_strong" : "prodibi_brand_strong"),
                (h.textContent = "Prodibi"),
                a && (h.style.setProperty("font-size", c.brandFontSize, "important"), h.style.setProperty("line-height", c.brandLineHeight, "important")),
                a ? h.style.setProperty("color", c.brand, "important") : h.style.setProperty("color", c.foreground, "important"),
                h.style.setProperty("font-family", c.brandStrongFont, "important"),
                b
            );
        }
        function h(a, b) {
            var c = document.createElement("div");
            c.className = a;
            var d = document.createElement("img");
            return c.appendChild(d), (d.src = f(b)), c;
        }
        function i() {
            var a = document.createElement("div");
            (a.className = "prodibi prodibi_gridOverlay"), a.style.setProperty("color", c.foreground, "important"), a.style.setProperty("font-family", c.font, "important"), a.style.setProperty("background", c.background, "important");
            var b = k(!0, !0, !0, !1, !1, " prodibi_controls_zIndex");
            a.appendChild(b);
            var d = document.createElement("div");
            return (
                d.setAttribute("data-prodibi-grid-root", ""),
                a.appendChild(d),
                b.querySelector("[data-prodibi-close]").addEventListener(
                    "click",
                    function () {
                        null != a.prodibiGrid && a.prodibiGrid.dispose(!1),
                            null != window.prodibiLastHTMLOverflowY && ((document.documentElement.style.overflowY = window.prodibiLastHTMLOverflowY), (window.prodibiLastHTMLOverflowY = null)),
                            null != window.prodibiLastBODYOverflowY && ((document.body.style.overflowY = window.prodibiLastBODYOverflowY), (window.prodibiLastBODYOverflowY = null)),
                            document.body.removeChild(a);
                    },
                    !1
                ),
                a
            );
        }
        function j(a, b, d) {
            var e = document.createElement("div");
            (e.className = "prodibi prodibi_mediaview prodibi_download_window"), e.style.setProperty("background", c.background, "important");
            var f = document.createElement("div");
            (f.className = "prodibi_mediaview_header prodibi_flex prodibi_mediaview_horizontal_margin"), e.appendChild(f);
            var g = document.createElement("div");
            f.appendChild(g), (g.className = "prodibi_flex prodibi_mediaview_backAndTitle");
            var i = h("prodibi_mediaview_button prodibi_touchTarget", "back.svg");
            i.setAttribute("title", "back"),
                i.setAttribute("data-prodibi-close", ""),
                i.addEventListener(
                    "click",
                    function () {
                        document.body.removeChild(e);
                    },
                    !1
                ),
                g.appendChild(i);
            var j = document.createElement("span");
            (j.className = "prodibi_mediaview_title"), j.setAttribute("data-prodibi-title", ""), g.appendChild(j);
            var k = document.createElement("div");
            if (((k.className = "prodibi_flex prodibi_img_downloader_wrapper"), e.appendChild(k), d)) {
                j.textContent = "Tap and hold on the image, then tap â€œSave Imageâ€";
                var l = document.createElement("img");
                (e.prodibiImage = l),
                    (l.onload = function () {
                        e.prodibiSpinner.stop(), (l.style.opacity = 1);
                    });
                var m = a.height / a.width,
                    n = window.innerHeight,
                    o = n / m;
                (o > a.width || o > window.innerWidth) && ((o = Math.min(window.innerWidth, a.width)), (n = o * m)),
                    Math.floor((2048 * a.height) / a.width),
                    (l.style.height = n + "px"),
                    (l.style.width = o + "px"),
                    (l.src = b.url),
                    k.appendChild(l),
                    (e.prodibiSpinner = new Spinner({ lines: 10, length: 27, width: 6, radius: 18, color: "#ffffff" })),
                    e.prodibiSpinner.spin(e);
            } else {
                var p = document.createElement("a");
                p.setAttribute("href", b.url), p.setAttribute("target", "_blank"), p.setAttribute("download", b.name), (p.innerHTML = "Right Click or Tap and hold on this link,<br/>then Tap â€œSave Link Asâ€"), k.appendChild(p);
            }
            return e;
        }
        function k(b, d, e, f, g, i) {
            var j = document.createElement("div");
            if (((j.className = "prodibi_mediaview_header prodibi_flex prodibi_mediaview_horizontal_margin" + i), b || d)) {
                var k = document.createElement("div");
                if ((j.appendChild(k), (k.className = "prodibi_flex prodibi_mediaview_backAndTitle"), b)) {
                    var l = h("prodibi_mediaview_button prodibi_touchTarget", "back.svg");
                    l.setAttribute("title", "back"), l.setAttribute("data-prodibi-close", ""), l.style.setProperty("background", c.controlsBackground, "important"), k.appendChild(l);
                }
                if (d) {
                    var m = document.createElement("span");
                    (m.className = "prodibi_mediaview_title"),
                        m.setAttribute("data-prodibi-title", ""),
                        m.style.setProperty("color", c.foreground, "important"),
                        m.style.setProperty("font-family", c.accentFont, "important"),
                        k.appendChild(m);
                }
            }
            if (g || e || f) {
                var n = document.createElement("div");
                if (((n.className = "prodibi_flex prodibi_mediaview_topRight_controls"), j.appendChild(n), g)) {
                    var o = a.buildDivWithImage("prodibi_mediaview_button prodibi_touchTargetLeft", "heart_empty.svg");
                    o.setAttribute("title", "favorite"), o.setAttribute("data-prodibi-favorite", ""), o.style.setProperty("background", c.controlsBackground, "important"), n.appendChild(o);
                }
                if (e) {
                    var p = h("prodibi_mediaview_button prodibi_touchTargetLeft" + (g ? " prodibi_mediaview_marginLeft" : ""), "download.svg");
                    p.setAttribute("title", "download"), p.setAttribute("data-prodibi-download", ""), p.style.setProperty("background", c.controlsBackground, "important"), n.appendChild(p);
                }
                if (f) {
                    var q = h("prodibi_mediaview_button prodibi_touchTargetRight prodibi_mediaview_marginLeft", "info.svg");
                    q.setAttribute("title", "info"), q.setAttribute("data-prodibi-info", ""), q.style.setProperty("background", c.controlsBackground, "important"), n.appendChild(q);
                }
            }
            return j;
        }
        function l(a, b, c, d) {
            return a !== !1 && (null == b ? null == c || c === !0 || 1 === c || (c !== !1 && 0 !== c && 2 === c && 2 === d) : b === !0 || 1 === b || (b !== !1 && 0 !== b && 2 === b && 2 === d));
        }
        function m(a, b, d) {
            var e = document.createElement("div");
            (e.className = "prodibi prodibi_mediaview"), e.style.setProperty("color", c.foreground, "important"), e.style.setProperty("font-family", c.font, "important"), e.style.setProperty("background", c.background, "important");
            var f = k(b, !0, !0, !0, d.showFavorite || !1, "");
            if ((e.appendChild(f), a)) {
                var i = document.createElement("div");
                (i.className = "prodibi_mediaview_navigation prodibi_flex prodibi_mediaview_horizontal_margin"), e.appendChild(i);               
            }
            var n = document.createElement("div");
            (n.className = "prodibi_flex prodibi_mediaview_footer prodibi_touchTarget"),
                n.setAttribute("title", "zoom"),
                n.setAttribute("data-prodibi-zoomIn", ""),
                n.style.setProperty("color", c.controls, "important"),
                n.style.setProperty("font-family", c.font, "important"),
                n.style.setProperty("background", c.controlsBackground, "important"),
                e.appendChild(n);
            var o = document.createElement("div");
            return (
                (o.className = "prodibi_mediaview_progress"),
                o.setAttribute("data-prodibi-progress", ""),
                n.appendChild(o),
                n.appendChild(h("prodibi_mediaview_progress_icon", "plus.svg")),               
                e
            );
        }
        function n(a, b, d, f) {
            f = f || "";
            var g = e(a.isDownloadEnabled, b.isDownloadEnabled),
                h = d.api + (a.account || b.account) + "/downloads/" + (a.id || b.id) + "?v=",
                i = document.createElement("div");
            (i.className = "prodibi_mediaview_download prodibi_flex prodibi_brand_footer"), i.style.setProperty("color", c.controls, "important"), i.style.setProperty("background", c.controlsBackground, "important");
            var j = document.createElement("a");
            if ((i.appendChild(j), j.setAttribute("download", ""), j.setAttribute("href", h + 2 + f), (j.textContent = "Large Zip (2048px) "), 1 === g)) {
                var k = document.createElement("a");
                i.appendChild(k), k.setAttribute("download", ""), k.setAttribute("href", h + 1 + f), (k.textContent = "Original Zip");
            }
            return i;
        }
        function o(a, b, d, f) {
            f = f || "";
            var g = e(a.isDownloadEnabled, b.isDownloadEnabled),
                h = a.account || b.account,
                i = d.api + h + "/downloads/" + (null == b.id ? "prodibi_no_container" : b.id) + "/items/" + a.id + "?v=",
                j = document.createElement("div");
            (j.className = "prodibi_mediaview_download prodibi_flex prodibi_brand_footer"), j.style.setProperty("color", c.controls, "important"), j.style.setProperty("background", c.controlsBackground, "important");
            var k = document.createElement("a");
            if ((j.appendChild(k), k.setAttribute("href", i + 2 + f), (k.textContent = "Large (2048 x " + Math.floor((2048 * a.height) / a.width) + " px)"), 1 === g)) {
                var l = document.createElement("a");
                j.appendChild(l), l.setAttribute("href", i + 1 + f), (l.textContent = "Original (" + a.width + " x " + a.height + " px)");
            }
            return j;
        }
        function p(a) {
            var b = !1,
                d = document.createElement("div");
            d.className = "prodibi_brand_footer";
            var e = a.title;
            if (null != e) {
                b = !0;
                var g = document.createElement("h2");
                d.appendChild(g), (g.className = "prodibi_brand_footer_title"), (g.innerHTML = e), g.style.setProperty("color", c.controls, "important"), g.style.setProperty("font-family", c.accentFont, "important");
            }
            var h = a.description;
            if (null != h) {
                b = !0;
                var i = document.createElement("div");
                (i.className = "prodibi_brand_footer_description"), d.appendChild(i), (i.innerHTML = h), i.style.setProperty("color", c.controls, "important"), i.style.setProperty("font-family", c.font, "important");
            }
            var j = document.createElement("div");
            (j.className = "prodibi_flex prodibi_exifs prodibi_exifs_main"), j.style.setProperty("color", c.controls, "important"), j.style.setProperty("font-family", c.font, "important");
            var k = !1,
                l = document.createElement("div");
            if ((j.appendChild(l), null != a.camera)) {
                (b = !0), (k = !0);
                var m = document.createElement("div");
                l.appendChild(m), (m.textContent = a.camera);
            }
            if (null != a.lens) {
                (b = !0), (k = !0);
                var n = document.createElement("div");
                l.appendChild(n), (n.textContent = a.lens);
            }
            var o = [];
            if ((null != a.focal && o.push(a.focal), null != a.aperture && o.push(a.aperture), null != a.speed && o.push(a.speed), null != a.iso && o.push(a.iso), o.length > 0)) {
                (b = !0), (k = !0);
                var p = document.createElement("div");
                l.appendChild(p), (p.textContent = o.join(" / "));
            }
            if (k) {
                var q = document.createElement("img");
                j.insertBefore(q, j.firstChild), q.setAttribute("alt", "exifs"), (q.src = f("camera.svg")), d.appendChild(j);
            }
            return b ? d : null;
        }
        function q(b, d, e, f) {
            var g = b || document.createElement("div");
            (b = document.createDocumentFragment()), g.style.setProperty("color", c.foreground, "important"), g.style.setProperty("font-family", c.font, "important"), g.style.setProperty("background", c.background, "important");
            var h = document.createElement("div");
            b.appendChild(h), (h.className = "prodibi_brand_header prodibi_flex");
            var i = d.account || e.account,
                j = null;
            if (
                (null != i
                    ? ((j = document.createElement("a")),
                      (j.className = "prodibi_brand_account"),
                      (j.innerHTML = i),
                      j.setAttribute("href", null == (d.domain || e.domain) ? "https://" + i + ".prodibi.com" : (d.domain || e.domain).domain),
                      j.setAttribute("target", "_blank"),
                      j.setAttribute("rel", "noopener"),
                      j.style.setProperty("color", c.foreground, "important"),
                      j.style.setProperty("font-family", c.font, "important"),
                      g.style.setProperty("font-family", c.accentFont, "important"))
                    : (j = document.createElement("div")),
                h.appendChild(j),
                f === !0)
            ) {
                var k = a.buildElement(null, d, e, !1, null, null);
                b.appendChild(k);
                var l = p(d, e);
                null !== l && b.appendChild(l);
            }
            return (g.className += " prodibi prodibi_brand_wrapper"), g.appendChild(b), g;
        }
        function r(a, d, h, i, j, k) {
            var m = a || document.createElement("div");
            a = document.createDocumentFragment();
            var n = document.createElement("canvas");
            if (
                ((n.prodibiOffsetTop = j),
                (n.prodibiOffsetBottom = k),
                a.appendChild(n),
                n.setAttribute("data-prodibi", ""),
                (n.prodibi = d),
                b.isMobile() || e(d.mouseOverZoom, h.mouseOverZoom) !== !0 || (n.className += " prodibi_zoomEffect"),
                e(d.seo, h.seo) === !0 && u(n, d),
                !b.isMobile() && e(d.mouseOverOverlay, h.mouseOverOverlay) === !0)
            ) {
                var o = document.createElement("div");
                (o.className = "prodibi_flex prodibi_circle prodibi_overlay"), o.style.setProperty("background", c.controlsBackground, "important");
                var p = document.createElement("img");
                (p.className = "prodibi_inner_circle"), (p.src = f("overlay.svg")), o.appendChild(p), a.appendChild(o);
            }
            var q = null;
            if (
                (null != d.cover && d.cover.showTitle === !0
                    ? (q = "")
                    : (e(d.showTitle, h.showTitle) === !0 && (q = d.title || (d.settings ? d.settings.title : null)),
                      null === q && e(d.showName, h.showName) === !0 && (q = d.name || (d.settings ? d.settings.name : null)),
                      e(d.showContainerName, h.showContainerName) === !0 && null != d.container && (q = d.container.name)),
                null !== q)
            ) {
                var r = document.createElement("div");
                r.style.setProperty("background", "linear-gradient(to bottom, transparent 0%, " + c.background + " 100%)"), (r.className = "prodibi_simple_text_overlay prodibi_flex");
                var s = document.createElement("span");
                (s.className = "prodibi-placeholder-title"), s.style.setProperty("color", c.foreground, "important"), (s.innerHTML = q), r.appendChild(s), a.appendChild(r);
            }
            if (l(i, d.branding, h.branding, 1)) {
                var t = g(!0);
                null !== q && (t.className += " prodibi_brand_top"), a.appendChild(t);
            }
            return (m.className += " prodibi_element"), (m.prodibiSettings = { element: d, settings: h }), m.appendChild(a), m;
        }
        function s(a) {
            return "https://max1.prodibicdn.com/" + a.id + "-v/" + a.name.substr(0, a.name.lastIndexOf(".")) + "_web.jpg";
        }
        function t(a) {
            var b = { "@context": "http://schema.org", "@type": "ImageObject" };
            if (
                (null != a.name && (b.contentUrl = s(a)),
                null != a.title && (b.name = a.title),
                null != a.description && (b.description = a.description),
                null != a.author && (b.author = a.author),
                null != a.location && (b.contentLocation = a.location),
                null != a.createDate && (b.datePublished = a.createDate),
                null != a.exifs)
            ) {
                for (var c = [], d = null, e = a.exifs, f = e.length, g = 0; g < f; ++g) (d = e[g]), c.push({ "@type": "PropertyValue", name: d.name, value: d.value });
                b.exifData = c;
            }
            return b;
        }
        function u(a, b) {
            if (null != b) {
                var c = t(b),
                    d = document.createElement("script");
                d.setAttribute("type", "application/ld+json"), (d.innerText = JSON.stringify(c)), a.appendChild(d);
            }
        }
        return (
            (a.computeBranding = l),
            (a.buildBrand = g),
            (a.buildMediaView = m),
            (a.buidWrapper = q),
            (a.buildElement = r),
            (a.buildInfo = p),
            (a.buildDownloadMenu = o),
            (a.buildZipDownloadMenu = n),
            (a.buildImageDownloader = j),
            (a.buildMediaViewHeader = k),
            (a.buildGridView = i),
            (a.buildDivWithImage = h),
            (a.buildJsonLd = t),
            (a.buildSchema = u),
            (a.svgUrl = f),
            a
        );
    })(window.Prodibi.template || {}, window.Prodibi.features, window.Prodibi.variables)),
    (function (a, b, c) {
        function d(d) {
            var e = c.getSettings(),
                f = (d.settings = d.settings || {}),
                g = f.layout || e.layout || "raw";
            if ("raw" === g) return void prodibiAsync.push(d);
            var h = f.root || (d.elements || [])[0];
            if (null == h) return void prodibiAsync.push(d);
            if (
                ("DIV" !== h.tagName ? (h = f.root = a.swap(h, "div")) : a.deleteChildren(h),
                null == d.type || "image" === d.type || ("thumbnailMediaView" === d.type && f.thumbnail !== !1) || ("thumbnailGrid" === d.type && f.thumbnail !== !1))
            ) {
                var i = "wrap" === g ? b.buidWrapper(h, f, e, !0) : b.buildElement(h, f, e, null);
                return (i.className += " prodibi prodibi_inlineBlock"), void prodibiAsync.push(d);
            }
            if ("wrap" === g) {
                var i = b.buidWrapper(h, f, e, !1),
                    j = document.createElement("div");
                (f.root = j), i.appendChild(j);
            }
            return void prodibiAsync.push(d);
        }
        function e(b, c, e) {
            return null == b && null == c
                ? e
                : ((b = b || c.root || (c.settings || {}).root),
                  b.prodibiRendered === !0 || null != b.prodibiImage
                      ? e
                      : ((b.prodibiRendered = !0),
                        (c = c || b.prodibi || a.getDataAttribute(b, "prodibi"))
                            ? ((null != c.type && "prodibiimage" !== c.type) || (c = { type: "image", settings: c }),
                              (c.settings = c.settings || {}),
                              (c.settings.root = b),
                              d(c),
                              (e = a.registerForMediaView(c) || e),
                              null != c.settings && c.settings.root != b && (c.settings.root.prodibiRendered = !0),
                              e)
                            : void 0));
        }
        function f(b, c) {
            var d = !1;
            (d = e(b, c, d)), d === !0 && a.addMediaViewCommands();
        }
        function g(b) {
            window.prodibiAsync = window.prodibiAsync || [];
            b = b || document;
            var c,
                d = b.querySelectorAll("[data-prodibi]"),
                f = 0,
                g = d.length,
                h = !1;
            for (f; f < g; ++f) (c = d[f]), (h = e(c, null, h));
            h === !0 && a.addMediaViewCommands();
        }
        (window.Prodibi.render = f), (window.Prodibi.renderAll = g);
    })(window.Prodibi.extensions, window.Prodibi.template, window.Prodibi),
    (window.Prodibi.source = (function (a) {
        return a.defaults(window.Prodibi.source, {
            links: [
                { rel: "stylesheet", href: "/prodibi.min.css" },
                { rel: "dns-prefetch", href: "https://max2.prodibicdn.com/" },
                { rel: "preconnect", href: "https://max2.prodibicdn.com/" },
            ],
            api: "https://core.prodibi.com/api/",
            domains: ["https://max1.prodibicdn.com/", "https://max2.prodibicdn.com/"],                        
        });
    })(window.Prodibi.extensions)),
    (function (a) {
        if (window.prodibiHeadOk !== !0) {
            var b,
                c,
                d,
                e,
                f,
                g,
                h = a.links,
                i = document.head;
            if (null != h && !document.getElementById("prodibi_link_0")) {
                var j = document.createDocumentFragment();
                for (f = "prodibi_link_", c = h.length, b = 0; b < c; ++b)
                    (g = f + b), (d = h[b]), (e = document.createElement("link")), e.setAttribute("id", g), e.setAttribute("rel", d.rel), e.setAttribute("href", d.href), j.appendChild(e);
                i.appendChild(j);
            }
            window.prodibiHeadOk = !0;
        }
    })(Prodibi.source),
    (window.Prodibi.Api = (function (a, b, c) {
        function d() {
            if (i === !1) {
                var a = b.getSecurityKey();
                null != a && (h = h + "&" + a.key + "=" + a.value), (i = !0);
            }
        }
        function e(a, e, f, g, i) {
            d();
            var j = c.api + a + "/containers" + h + e;
            b.xhr("GET", j, null, f, null, g, i);
        }
        function f(e, f, g, i, j) {
            if (null != window.Prodibi.getContainerFromLocalCache) {
                var k = window.Prodibi.getContainerFromLocalCache(f);
                if (null != k) return void i(k, g);
            }
            d();
            var l = a.getSettings();
            if (l.cache === !0)
                b.xhr(
                    "GET",
                    c.domains[0] + e + "/" + f,
                    null,
                    g,
                    null,
                    function (a, b) {
                        i(a, b);
                    },
                    function (a, d) {
                        b.xhr("GET", c.api + e + "/containers/" + f + h + "&cache=true", null, d, null, i, j);
                    }
                );
            else {
                var m = c.api + e + "/containers/" + f + h;
                b.xhr("GET", m, null, g, null, i, j);
            }
        }
        function g(a, e, f, g, h) {
            d();            
        }
        var h =
                "?$expand&$select=id,name,title,description,cover,author,hashTags,access,isDownloadEnabled,showStatistics,gridType,type,order,favorite,location,createDate,margin,items/id,items/height,items/width,items/title,items/description,items/author,items/name,items/rating,items/hashTags,items/sas,items/s,items/order,items/smartX,items/smartY,items/favorite,items/location,items/exifs,items/createDate&$orderby=order%20asc,items/order%20asc&$info",
            i = !1;
        return b.defaults(window.Prodibi.Api, { getPublicContainers: e, getPublicContainer: f, updateRatings: g });
    })(window.Prodibi, window.Prodibi.extensions, window.Prodibi.source)),
    (window.Prodibi.event = (function (a) {
        function b(a, b, c) {
            var d = new CustomEvent(b, { detail: c });
            a.dispatchEvent(d);
        }
        function c(a) {
            var b = this;
            (b.eventName = a.eventName),
                (b.handlers = []),
                (b.element = null == a.element ? window : a.element),
                (b.isConnected = b.ticking = !1),
                (b.lastEventData = b.lastProcessTime = null),
                (b.minDeltaTime = null == a.minDeltaTime ? 0.1 : a.minDeltaTime),
                (b.initEventData = null == a.initEventData ? null : a.initEventData),
                (b.getEventData =
                    null == a.getEventData
                        ? function () {
                              return null;
                          }
                        : a.getEventData),
                (b.onEventHandler = function (a) {
                    b.onEvent(a);
                }),
                (b.onProcessHandler = function (a) {
                    b.process(a);
                });
        }
        function d() {
            return null === f && ((f = new Prodibi.event.EventThrottler({ eventName: "resize", minDeltaTime: 0.2 })), f.connect()), f;
        }
        function e(a) {
            return null != a && (a.stopPropagation(), a.preventDefault(), !1);
        }
        (c.prototype.connect = function () {
            var a = this;
            a.isConnected || ((a.isConnected = !0), null !== a.initEventData && (a.lastEventData = a.initEventData()), a.element.addEventListener(a.eventName, a.onEventHandler, !1));
        }),
            (c.prototype.disconnect = function () {
                var a = this;
                a.isConnected && ((a.isConnected = !1), a.element.removeEventListener(a.eventName, a.onEventHandler, !1));
            }),
            (c.prototype.addHandler = function (a) {
                null != a && this.handlers.push(a);
            }),
            (c.prototype.addFirstHandler = function (a) {
                null != a && this.handlers.unshift(a);
            }),
            (c.prototype.addHandler = function (a) {
                null != a && this.handlers.push(a);
            }),
            (c.prototype.removeHandler = function (a) {
                if (null != a) {
                    var b = this.handlers,
                        c = b.indexOf(a);
                    b.splice(c, 1);
                }
            }),
            (c.prototype.onEvent = function (a) {
                var b = this;
                (b.lastEventData = b.getEventData(a)), b.requestTick();
            }),
            (c.prototype.requestTick = function () {
                var a = this;
                a.ticking || window.requestAnimationFrame(a.onProcessHandler), (a.ticking = !0);
            }),
            (c.prototype.process = function (a) {
                var b = this;
                if (null === b.lastProcessTime) b.lastProcessTime = a;
                else if (a - b.lastProcessTime < b.minDeltaTime) return void (b.ticking = !1);
                b.lastProcessTime = a;
                for (var c, d = b.lastEventData, e = b.handlers, f = e.length, g = !1, h = 0; h < f; ++h) (c = e[h]), null != c ? c(d) : (g = !0);
                g === !0 &&
                    (b.handlers = e.filter(function (a) {
                        return null != a;
                    })),
                    (b.ticking = !1);
            }),
            (c.prototype.dispose = function () {
                var a = this,
                    b = a.handlers.length;
                a.disconnect();
                for (var c = 0; c < b; ++c) a.removeHandler(a.handlers[c]);
            });
        var f = null;
        return a.defaults(window.Prodibi.event, { EventThrottler: c, dispatchEvent: b, getResizeThrottler: d, stopPropagation: e });
    })(Prodibi.extensions)),
    (window.Prodibi.ProgressiveImage = (function (a, b) {
        function c(a, b, c, d, e, f) {
            (this.onLoadLow = d),
                (this.onLoadHigh = e),
                (this.onError = f ? f : function () {}),
                (this.low = this.high = null),
                (this.state = c),
                (this.urlLowQuality = a),
                (this.urlHighQuality = b),
                (this.lowIsLoaded = this.highIsLoaded = !1);
        }
        function d(a, b) {
            (a.lowIsLoaded = !0), a.highIsLoaded || a.onLoadLow(b, a);
        }
        function e(a, c) {
            if (((a.highIsLoaded = !0), !a.lowIsLoaded)) {
                var d = a.low;
                null != d && null != d.src && ((d.onload = d.onerror = b), (d.src = ""));
            }
            a.onLoadHigh(c, a);
        }
        return (
            (c.prototype = {
                loadLow: function () {
                    var b = this;
                    if ("string" == typeof this.urlLowQuality) {
                        var c = new Image();
                        (c.crossOrigin = "Anonymous"),
                            (c.onload = function () {
                                d(b, c);
                            }),
                            (c.onerror = function () {
                                b.onError(b, c);
                            }),
                            (b.low = c),
                            (c.src = b.urlLowQuality);
                    } else
                        this.urlLowQuality.then(function (c) {
                            a._0x19459(c.url, c.k, c.i)
                                .then(function (a) {
                                    d(b, a);
                                })
                                .catch(function (a) {
                                    b.onError(b, a);
                                });
                        });
                    return b;
                },
                loadHigh: function () {
                    var b = this;
                    if ("string" == typeof this.urlHighQuality) {
                        var c = new Image();
                        (c.crossOrigin = "Anonymous"),
                            (c.onload = function () {
                                e(b, c);
                            }),
                            (c.onerror = function () {
                                b.onError(b, c);
                            }),
                            (b.high = c),
                            (c.src = this.urlHighQuality);
                    } else
                        this.urlHighQuality.then(function (c) {
                            a._0x19459(c.url, c.k, c.i)
                                .then(function (a) {
                                    e(b, a);
                                })
                                .catch(function (a) {
                                    b.onError(b, a);
                                });
                        });
                },
            }),
            c
        );
    })(window.Prodibi._0x1939E)),
    (window.Prodibi.imageLoader = (function (a, b, c, d) {
        function e(a, b) {
            var c = b.state,
                d = c.viewport,
                e = c.viewport.drawingContext;
            if (c.cache) {
                var f = d.imageSource;
                if (null === f) return;
                f.setTile(b.highIsLoaded ? "/01/" : "/00/", c.tileLevel, c.row, c.column, a);
            }
            null !== e &&
                d.redrawId === c.redrawId &&
                (e.drawImage(a, c.x, c.y, Math.ceil(a.width * c.adjustment), Math.ceil(a.height * c.adjustment)),
                (b.highIsLoaded && b.lowIsLoaded) || d.tileRemainingCount--,
                0 == d.tileRemainingCount && null != c.renderedCallback && (c.renderedCallback(d), (d.tileRemainingCount = -1)),
                b.highIsLoaded && (d.tileRemainingCountHigh--, 0 == d.tileRemainingCountHigh && null != c.renderedHighCallback && c.renderedHighCallback(d)));
        }
        function f(a, b, c, e, f, g) {
            return new d(a, b, c, e, f, g);
        }
        function g(a, b, c, d) {
            var e = this;
            (e.loadImage = a), (e.onLoadLow = b), (e.onLoadHigh = c), (e.onError = d);
        }
        var h = e;
        return (
            (g.prototype.getUrlBuilder = function (b, c, d, e) {
                var f,
                    g,
                    h = a._0x1939E;
                return 0 === b
                    ? h._0x1993D
                    : 1 === b
                    ? ((f = h._0x19549),
                      function (a, b, g, h, i, j) {
                          return f(c, d, e, a, b, g, h, i, j);
                      })
                    : 2 === b
                    ? ((g = h._0x19E29),
                      function (a, b, f, h, i, j) {
                          return g(c, d, e, a, b, f, h, i, j);
                      })
                    : h._0x1993D;
            }),
            b.defaults(window.Prodibi.imageLoader, {
                drawTile: h,
                loadLowAndHigh: f,
                ImageLoader: g,
                loadImage: new g(f, h, h, null),
                low: "/00/",
                high: "/01/",
                devicePixelRatio: Math.min(2, b.devicePixelRatio()),
                backingStorePixelRatio: b.backingStorePixelRatio(),
            })
        );
    })(Prodibi, Prodibi.extensions, Prodibi.source, Prodibi.ProgressiveImage)),
    (window.Prodibi.core = (function (a, b, c, d, e) {
        function f(a) {
            var b = this;
            b.src = a.id || a.src;
            var d = a.height,
                f = a.width;
            (b.width = f),
                (b.height = d),
                (b.maxLevel = Math.ceil(Math.log(Math.max(d, f)) / Math.log(2))),
                (b.aspectRatio = d / f),
                (b.tileSize = 512),
                (b.sourceDomains = c.domains),
                (b.modulo = c.modulo),
                (b.sas = a.sas || ""),
                (b.s = a.s || 0),
                0 === b.s || e._0x1939D() || ((a.s = b.s = 0), (a.id = a.src = b.src = "wxex8dmevqzo5z"), (a.width = b.width = 6e3), (a.height = b.height = 6e3), (a.smartX = 0.5), (a.smartY = 0.5)),
                (b.k = null),
                (b.i = null);
        }
        function g(a, b, c, d, f, g, i, j, k, l, m, n, o) {
            var p = a.imageSource;
            return p.s > 0 && null === p.k
                ? void e._0x1933F(p.src, p.width, p.height).then(function (q) {
                      null != a.imageSource && ((p.k = q), (p.i = e._0x192E1(p.width, p.height)), h(a, b, c, d, f, g, i, j, k, l, m, n, o));
                  })
                : h(a, b, c, d, f, g, i, j, k, l, m, n, o);
        }
        function h(a, b, c, d, e, f, g, h, i, j, k, l, m) {
            var n = h.loadImage,
                o = h.onLoadLow,
                p = h.onLoadHigh,
                q = h.onError,
                r = a.imageSource,
                s = r.src,
                t = r.sas,
                u = r.sourceDomains,
                v = (r.modulo, r.maxLevel),
                w = r.width,
                x = r.aspectRatio,
                y = r.tileSize,
                z = h.getUrlBuilder(r.s, r.k, r.i, v),
                A = Math.pow(2, f),
                B = A / w;
            (d *= B), (e *= B);
            var C = b + d,
                D = c + e;
            if (0 > C || b > 1) return 0;
            if (0 > D || c > x) return 0;
            var E,
                F,
                G,
                H,
                I,
                J,
                K = Math.max(0, b),
                L = Math.max(0, c),
                M = Math.min(1, C) - K,
                N = Math.min(x, D) - L,
                O = K + M,
                P = L + N,
                Q = Math.pow(2, Math.floor(f)),
                R = Q / w,
                S = w / A,
                T = Q / A,
                U = y * T * B,
                V = Math.ceil(v - f),
                W = y * R,
                X = 14,
                Y = Math.pow(10, X);
            (F = Math.floor(Math.round(parseFloat(K / U) * Y) / Y)),
                (G = Math.ceil(Math.round(parseFloat(O / U) * Y) / Y)),
                0 === G && (G = 1),
                (I = Math.floor(Math.round(parseFloat(L / U) * Y) / Y)),
                (J = Math.ceil(Math.round(parseFloat(P / U) * Y) / Y)),
                0 === J && (J = 1);
            var Z,
                $,
                _ = [],
                aa = u[0] + s,
                ba = u[1] + s;
            for (E = F; E < G; E++)
                for (Z = (E * W - b) * S, Z = E === F ? Math.ceil(Z) : E === G ? Math.floor(Z) : Math.round(Z), H = I; H < J; H++) {
                    ($ = (H * W - c) * S), ($ = H === I ? Math.ceil($) : H === J ? Math.floor($) : Math.round($));
                    var ca = z(aa, 0, V, E, H, t),
                        da = z(ba, 1, V, E, H, t),
                        ea = null,
                        ea = { retryCount: 0, viewport: a, x: Z, y: $, adjustment: T, redrawId: g, row: H, column: E, tileLevel: V, renderedCallback: i, renderedLowCallback: j, renderedHighCallback: k, cache: l },
                        fa = n(ca, da, ea, o, p, q);
                    null !== fa && (fa.loadLow(), _.push(fa));
                }
            for (var ga = _.length, ha = ga - 1; ha > -1; --ha) _[ha].loadHigh();
            var ia = (G - F) * (J - I);
            return null != m && m(ia), ia;
        }
        function i() {
            if (null === u) {
                u = document.createElement("div");
                var a = u.style;
                (a.display = "block"), (a.position = "absolute"), (a.visibility = "hidden"), (a.top = "-10000px"), (a.left = "-10000px"), (a.minHeight = "100vh"), (a.minWidth = "100vw"), document.body.appendChild(u);
            }
            (u.style.display = "block"), (v = u.offsetHeight), (w = u.offsetWidth), (u.style.display = "none");
        }
        function j(a, b, c, d, e, f) {
            var g = 0,
                h = 0,
                j = null,
                k = null;
            return (
                "self" === b
                    ? ((h = a.offsetWidth), 0 === h && ((k = window.getComputedStyle(a, null)), (h = parseInt(k.getPropertyValue("width")) - parseInt(k.getPropertyValue("padding-right")) - parseInt(k.getPropertyValue("padding-left")))))
                    : "parent" === b
                    ? ((j = null != a.prodibi && null != a.prodibi.root ? a.prodibi.root.parentNode : a.parentNode),
                      (h = j.offsetWidth),
                      0 === h && ((k = window.getComputedStyle(j, null)), (h = parseInt(k.getPropertyValue("width")) - parseInt(k.getPropertyValue("padding-right")) - parseInt(k.getPropertyValue("padding-left")))))
                    : "parentInner" === b
                    ? ((j = null != a.prodibi && null != a.prodibi.root ? a.prodibi.root.parentNode : a.parentNode),
                      (k = window.getComputedStyle(j, null)),
                      (h = parseInt(k.getPropertyValue("width")) - parseInt(k.getPropertyValue("padding-right")) - parseInt(k.getPropertyValue("padding-left"))))
                    : "aspectRatio" === b ||
                      ("window" === b
                          ? (h = window.innerWidth)
                          : "viewport" === b
                          ? (null === w && i(), (h = w))
                          : "vw" === b.slice(-2)
                          ? (null === w && i(), (h = (parseFloat(b) / 100) * w))
                          : "vh" === b.slice(-2)
                          ? (null === v && i(), (h = (parseFloat(b) / 100) * v))
                          : "%" === b[b - 1]
                          ? ((j = null != a.prodibi && null != a.prodibi.root ? a.prodibi.root.parentNode : a.parentNode), (h = (parseFloat(b) / 100) * j.offsetWidth))
                          : ((h = a.offsetWidth),
                            0 === h && ((k = window.getComputedStyle(a, null)), (h = parseInt(k.getPropertyValue("width")) - parseInt(k.getPropertyValue("padding-right")) - parseInt(k.getPropertyValue("padding-left")))))),
                (h = Math.min(h, 1.2 * window.innerWidth)),
                "self" === c
                    ? ((g = a.offsetHeight),
                      0 === g && (null === k && (k = window.getComputedStyle(a, null)), (g = parseInt(k.getPropertyValue("height")) - parseInt(k.getPropertyValue("padding-top")) - parseInt(k.getPropertyValue("padding-bottom")))))
                    : "parent" === c
                    ? (null === j && (j = a.parentNode),
                      (g = j.offsetHeight),
                      0 === g && (null === k && (k = window.getComputedStyle(j, null)), (g = parseInt(k.getPropertyValue("height")) - parseInt(k.getPropertyValue("padding-top")) - parseInt(k.getPropertyValue("padding-bottom")))))
                    : "parentInner" === c
                    ? (null === j && (j = a.parentNode),
                      null === k && (k = window.getComputedStyle(j, null)),
                      (g = parseInt(k.getPropertyValue("height")) - parseInt(k.getPropertyValue("padding-top")) - parseInt(k.getPropertyValue("padding-bottom"))))
                    : "aspectRatio" === c ||
                      ("window" === c
                          ? (g = window.innerHeight)
                          : "viewport" === c
                          ? (null === v && i(), (g = v))
                          : "vw" === c.slice(-2)
                          ? (null === w && i(), (g = (parseFloat(c) / 100) * w))
                          : "vh" === c.slice(-2)
                          ? (null === v && i(), (g = (parseFloat(c) / 100) * v))
                          : "%" === c[c.length - 1]
                          ? (g = (parseFloat(c) / 100) * a.parentNode.offsetHeight)
                          : "square" === c
                          ? (g = h)
                          : ((g = a.offsetHeight),
                            0 === g && (null === k && (k = window.getComputedStyle(a, null)), (g = parseInt(k.getPropertyValue("height")) - parseInt(k.getPropertyValue("padding-top")) - parseInt(k.getPropertyValue("padding-bottom")))))),
                (g = Math.min(g, 1.2 * window.innerHeight)),
                isNaN(g) && (g = 1),
                isNaN(h) && (h = 1),
                g <= 1 && (g = h * d),
                h <= 1 && ((h = g / d), (j = null != a.prodibi && null != a.prodibi.root ? a.prodibi.root.parentNode : a.parentNode), (h > e || h > j.offsetWidth) && ((h = Math.min(j.offsetWidth, e)), (g = h * d))),
                { height: Math.ceil(g), width: Math.ceil(h) }
            );
        }
        function k(a, b, c, d) {
            var e,
                f,
                g = Math.ceil(a * c),
                h = Math.ceil(b * c);
            return c === d ? ((e = a), (f = b)) : ((e = g), (f = h)), { viewportHeight: g, viewportWidth: h, canvasHeight: e, canvasWidth: f };
        }
        function l() {
            var a = this,
                b = a.element;
            (a.cssSize = j(b, a.settings.widthMode, a.settings.heightMode, a.imageSource.aspectRatio, a.settings.width, a.settings.height)),
                (a.physicalSize = k(a.cssSize.height, a.cssSize.width, a.renderStrategy.devicePixelRatio, a.renderStrategy.backingStorePixelRatio)),
                (b.height = a.physicalSize.canvasHeight),
                (b.width = a.physicalSize.canvasWidth),
                (b.style.height = a.cssSize.height + "px"),
                (b.style.width = a.cssSize.width + "px");
        }
        function m(a, b, c, d) {
            var e,
                f = a.imageSource,
                g = Math.log(f.width / a.width),
                h = Math.log(f.height / a.height);
            null == b && (b = 0),
                null == c && (c = 0),
                (b = Math.min(1, Math.max(b, 0))),
                (c = Math.min(f.aspectRatio, Math.max(c, 0))),
                (e = g < h ? Math.max(g / Math.log(2), 0) : Math.max(h / Math.log(2), 0)),
                null != d
                    ? ((d = a.zoomPercentageToZoom(d)), (e = Math.max(Math.min(d, e), 0)), (a.x = b * (1 - (a.width * Math.pow(2, e)) / f.width)), (a.y = c * (f.aspectRatio - (a.height * Math.pow(2, e)) / f.width)))
                    : g < h
                    ? ((a.x = 0), (a.y = c * (f.aspectRatio - (a.height * Math.pow(2, e)) / f.width)))
                    : g > h
                    ? ((a.x = b * (1 - (a.width * Math.pow(2, e)) / f.width)), (a.y = 0))
                    : ((a.x = 0.5 * (1 - (a.width * Math.pow(2, e)) / f.width)), (a.y = 0.5 * (f.aspectRatio - (a.height * Math.pow(2, e)) / f.width))),
                (a.zoomFactor = a.initialZoom = e),
                (a.initialPositionX = a.x),
                (a.initialPositionY = a.y);
        }
        function n(a) {
            var b,
                c,
                d = a.imageSource,
                e = Math.log(d.width / a.width),
                f = Math.log(d.height / a.height),
                g = a.width / 2,
                h = a.height / 2,
                i = 0.5 - g / d.width,
                j = d.aspectRatio / 2 - h / d.width;
            (b = Math.max(Math.max(e, f) / Math.log(2), 0)), (c = (1 - Math.pow(2, b)) / d.width), (a.x = g * c + i), (a.y = h * c + j), (a.zoomFactor = a.initialZoom = b), (a.initialPositionX = a.x), (a.initialPositionY = a.y);
        }
        function o(a, b, c, d, e) {
            "fit" != e ? m(a, b, c, d) : n(a);
        }
        function p(b, c) {
            a.image(b, c);
        }
        function q(a) {
            null != a.prodibiImage && (a.prodibiImage.dispose(), (a.prodibiImage = null)), (a.width = 1), (a.height = 1);
        }
        function r(a, b) {
            null != a && null != a.element && d.dispatchEvent(a.element, b, a);
        }
        function s(a) {
            r(a.prodibiImage, "prodibi.image.complete");
        }
        function t(a) {
            r(a.prodibiImage, "prodibi.image.completeHQ");
        }
        function q(a) {
            null != a.prodibiImage && (a.prodibiImage.dispose(), (a.prodibiImage = null)), (a.width = 1), (a.height = 1);
        }
        (f.prototype.setTile = function (a, b, c, d, e) {
            var f = this;
            null == f.tileCache && (f.tileCache = {});
            var g = a + b + "$" + c + "$" + d;
            f.tileCache[g] = e;
        }),
            (f.prototype.dispose = function () {
                var a = this;
                null != a.tileCache && (a.tileCache = null), null != a.requestCache && (a.requestCache = null);
            });
        var u = null,
            v = null,
            w = null;
        return (
            window.addEventListener(
                "resize",
                function () {
                    (v = null), (w = null);
                },
                !1
            ),
            b.defaults(window.Prodibi.core, {
                draw: g,
                setDimensions: l,
                computeCssSize: j,
                computePhysicalSize: k,
                positionViewport: o,
                ImageSource: f,
                setupCanvas: p,
                tearDownCanvas: q,
                sendEvent: r,
                sendCompleteEvent: s,
                sendHQCompleteEvent: t,
                fit: n,
                mesureViewport: i,
                tearDownCanvas: q,
            })
        );
    })(Prodibi, Prodibi.extensions, Prodibi.source, Prodibi.event, window.Prodibi._0x1939E)),
    (function (a, b, c, d, e, f) {
        function g(a, b) {
            var c = this;
            return (
                (c.settings = b),
                (c.element = a || b.root),
                (c.imageSource = new j(b)),
                (c.onResizeHandler = null),
                (c.renderStrategy = f),
                c.setDimensions(),
                (c.viewport = null),
                (c.drawingContext = a.getContext("2d")),
                c.setNewViewportAndDraw(),
                c.addEvents(),
                window.requestAnimationFrame(function () {
                    d.dispatchEvent(document.body, "prodibi.image.create", c);
                }),
                c
            );
        }
        var h = b.positionViewport,
            i = b.draw,
            j = b.ImageSource,
            k = d.stopPropagation,
            l = d.getResizeThrottler(),
            m = (b.sendEvent, b.sendCompleteEvent),
            n = b.sendHQCompleteEvent;
        a.Viewport = function (a, b, c, d, e) {
            var f = this;
            (f.drawingContext = a),
                (f.devicePixelRatio = e),
                (f.x = f.y = 0),
                (f.width = b),
                (f.height = c),
                (f.prodibiImage = d),
                (f.imageSource = d.imageSource),
                (f.renderStrategy = d.renderStrategy),
                (f.zoomFactor = f.initialZoom = 0),
                (f.initialPositionX = 0),
                (f.initialPositionY = 0),
                (f.redrawId = f.tileRemainingCount = f.tileRemainingCountLow = f.tileRemainingCountHigh = 0);
            var g = d.settings;
            (f.settings = g), h(f, g.smartX, g.smartY, g.zoom, g.position);
        };
        var o = a.Viewport.prototype;
        (o.fit = function () {
            b.fit(this);
        }),
            (o.drawLowAndHigh = function (a, b, c, d) {
                var e = this,
                    f = e.renderStrategy;
                i(e, e.x, e.y, e.width, e.height, e.zoomFactor, ++e.redrawId, f.loadImage, a, b, c, d, function (a) {
                    e.tileRemainingCount = e.tileRemainingCountLow = e.tileRemainingCountHigh = a;
                });
            }),
            (o.zoomToZoomPercentage = function (a) {
                return 100 / Math.pow(2, a);
            }),
            (o.dispose = function () {
                var a = this;
                a.drawingContext = a.prodibiImage = a.imageSource = null;
            }),
            (o.clear = function () {
                this.drawingContext.clearRect(0, 0, Math.ceil(this.width), Math.ceil(this.height));
            }),
            (g.prototype.draw = function () {
                this.viewport.drawLowAndHigh(m, null, n, "zoom" === this.settings.mode);
            }),
            (g.prototype.setNewViewportAndDraw = function () {
                var b = this;
                (b.viewport = new a.Viewport(b.drawingContext, b.physicalSize.viewportWidth, b.physicalSize.viewportHeight, b, b.renderStrategy.devicePixelRatio)), b.draw();
            }),
            (g.prototype.setDimensions = b.setDimensions),
            (g.prototype.addEvents = function () {
                var a = this,
                    b = a.settings;
                b.autoResize &&
                    ((a.onResizeHandler = function () {
                        a.resize();
                    }),
                    l.addHandler(a.onResizeHandler)),
                    b.disableContextMenu && a.element.addEventListener("contextmenu", k, !1);
            }),
            (g.prototype.removeEvents = function () {
                var a = this;
                null !== a.onResizeHandler && (l.removeHandler(a.onResizeHandler), (a.onResizeHandler = null)), null !== a.element && a.element.removeEventListener("contextmenu", k, !1);
            }),
            (g.prototype.dispose = function () {
                var a = this;
                a.removeEvents(),
                    a.viewport.dispose(),
                    window.requestAnimationFrame(function () {
                        d.dispatchEvent(document.body, "prodibi.image.destroy", a);
                    });
            }),
            (g.prototype.resize = function () {
                var a = this,
                    c = a.settings;
                ("viewport" !== c.widthMode && "viewport" !== c.heightMode) || b.mesureViewport();
                var d = b.computeCssSize(a.element, c.widthMode, c.heightMode, a.imageSource.aspectRatio, c.width, c.height);
                (a.cssSize.height === d.height && a.cssSize.width === d.width) || ((a.viewport.drawingContext = null), (a.viewport.prodibiImage = null), (a.viewport = null), a.setDimensions(), a.setNewViewportAndDraw());
            }),
            (g.prototype.minZoom = function () {
                var a = this.viewport;
                return a.zoomToZoomPercentage(a.initialZoom);
            }),
            (g.prototype.getZoom = function () {
                var a = this.viewport;
                return a.zoomToZoomPercentage(a.zoomFactor);
            }),
            (g.prototype.fit = function () {
                var a = this.viewport;
                h(a, null, null, null, "fit"), a.clear(), this.draw();
            }),
            (g.prototype.smart = function () {
                var a = this,
                    b = a.viewport,
                    c = a.settings;
                h(b, c.smartX, c.smartY, null, "smart"), b.clear(), a.draw();
            }),
            (g.prototype.reDraw = function () {
                var a = this,
                    b = a.viewport;
                b.clear(), a.draw();
            }),
            (g.prototype.releaseCanvasMemory = function () {
                var a = this,
                    b = a.element;
                (b.height = 1), (b.width = 1);
            }),
            (g.prototype.restoreCanvas = function () {
                var a = this,
                    b = a.element;
                (b.height = a.physicalSize.canvasHeight), (b.width = a.physicalSize.canvasWidth), a.viewport.clear(), a.draw();
            }),
            (a.Image = g);
    })(Prodibi, Prodibi.core, Prodibi.features, Prodibi.event, Prodibi.source, Prodibi.imageLoader),
    (function () {
        function a() {
            var a = this;
            (a.sequence = null),
                (a.duration = null),
                (a.startTime = null),
                (a.endTime = null),
                (a.lastTime = null),
                (a.requestId = null),
                (a.selfUpdate = function (b) {
                    a.update(b);
                });
        }
        (a.prototype.update = function (a) {
            var b = this;
            b.requestId = window.requestAnimationFrame(b.selfUpdate);
            var c,
                d,
                e = b.sequence,
                f = e.length;
            if (null == b.startTime) for (b.startTime = a, b.endTime = a + b.duration, d = 0; d < f; ++d) (c = e[d]), c.animate(c.startValue), c.init(b, a);
            if (b.endTime <= a) {
                for (d = 0; d < f; ++d) (c = e[d]), c.animate(c.endValue), c.complete(b), null != c.onComplete && c.onComplete(b, a);
                return void window.cancelAnimationFrame(b.requestId);
            }
            b.lastTime = a;
            var g = 0.5 - Math.cos(((a - b.startTime) / (b.endTime - b.startTime)) * 3.141592653589793) / 2;
            for (d = 0; d < f; ++d) (c = e[d]), c.animate(c.startValue + (c.endValue - c.startValue) * g);
        }),
            (a.prototype.cancel = function () {
                window.cancelAnimationFrame(this.requestId);
            }),
            (a.prototype.shiftBy = function (a) {
                this.endValue += a;
            }),
            (window.Prodibi.animate = {
                create: function () {
                    return new a();
                },
                Animate: a,
            });
    })(),
    (function (a) {
        function b(a, b) {
            a.endTime = b + c * Math.abs((this.endValue - this.startValue) / 2);
        }
        var c = 1600;
        a.Animate.prototype.zoom = function (a) {
            var d = this;
            (d.requestId = window.requestAnimationFrame(d.selfUpdate)),
                (d.sequence = [{ startValue: a.startZoom, endValue: a.endZoom, init: b, animate: a.animateZoom, onComplete: a.animateZoomComplete, complete: function () {} }]),
                (d.startTime = null),
                (d.duration = c);
        };
    })(window.Prodibi.animate),
    (window.Prodibi.event = (function (a, b) {
        function c(a, b) {
            var c = b.clientX - a.clientX,
                d = b.clientY - a.clientY;
            return Math.sqrt(c * c + d * d);
        }
        function d(a, b) {
            return { x: Math.round((a.clientX + b.clientX) / 2), y: Math.round((a.clientY + b.clientY) / 2) };
        }
        function e(a) {
            return null != a.touches && a.touches.length > 0 ? a.touches : null != a.changedTouches && a.changedTouches.length > 0 ? a.changedTouches : null != a.pointers && a.pointers.length > 0 ? a.pointers : [a];
        }
        function f(a, b) {
            var c = this;
            (c.isPanning = !1), (c.isPointerDown = !1), (c.threshold = 10), (c.settings = b || {}), (c.element = a), (c.deltaX = 0), (c.deltaY = 0), (c.startX = 0), (c.startY = 0);
        }
        function g(a, b) {
            var c = this;
            (c.isPinching = !1), (c.settings = b || {}), (c.element = a), (c.startTouches = null);
        }
        function h(b) {
            if (m) {
                var c = document.createElement("style");
                (c.type = "text/css"),
                    (c.innerHTML =
                        ".prodibiActionable { -webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;-o-user-select: none;user-select: none;-ms-touch-action: none;touch-action: none;-webkit-user-drag: none;user-drag: none;-webkit-tap-highlight-color: 'rgba(0,0,0,0)';tap-highlight-color: 'rgba(0,0,0,0)';}"),
                    document.getElementsByTagName("head")[0].appendChild(c),
                    (m = !1);
            }
            var d = this;
            (d.element = b),
                a.addClass(b, "prodibiActionable"),
                (b.prodibiTouchManager = d),
                (d.cancelNextClick = !1),
                (d.onPointerDownHandler = d.onPointerDown.bind(d)),
                (d.onPointerMoveHandler = d.onPointerMove.bind(d)),
                (d.onPointerUpHandler = d.onPointerUp.bind(d)),
                (d.onPointerLeaveHandler = d.onPointerLeave.bind(d)),
                (d.onDocumentMouseOutHandler = d.onDocumentMouseOut.bind(d)),
                (d.onClickHandler = d.onClick.bind(d)),
                (d.gestures = []),
                d.gestures.push(new g(b, {})),
                d.gestures.push(new f(b, { manager: d })),
                d.addListeners();
        }
        function i(a) {
            a || (a = window.event);
            var b = Math.max(-1, Math.min(1, a.wheelDelta || -a.detail || -a.deltaY));
            this.call(void 0, a, b);
        }
        function j(a, b) {
            var c = i.bind(b);
            (a.mousewheelHandlerTracking = c), a.addEventListener ? (a.addEventListener("mousewheel", c, !1), a.addEventListener("DOMMouseScroll", c, !1), a.addEventListener("wheel", c, !1)) : a.attachEvent("onmousewheel", c);
        }
        function k(a) {
            void 0 !== a &&
                null !== a &&
                null != a.mousewheelHandlerTracking &&
                (a.removeEventListener
                    ? (a.removeEventListener("mousewheel", a.mousewheelHandlerTracking, !1), a.removeEventListener("DOMMouseScroll", a.mousewheelHandlerTracking, !1), a.removeEventListener("wheel", a.mousewheelHandlerTracking, !1))
                    : a.detachEvent("onmousewheel", a.mousewheelHandlerTracking),
                delete a.mousewheelHandlerTracking);
        }
        var l = b.dispatchEvent;
        (f.prototype.onPointerDown = function (a) {
            var b = this,
                c = e(a);
            if (((b.settings.manager.cancelNextClick = !1), 1 !== c.length))
                return b.isPanning && l(b.element, "panend", b.computeInput(a)), (b.isPanning = !1), (b.isPointerDown = !1), (b.deltaX = 0), (b.deltaY = 0), (b.startX = 0), void (b.startY = 0);
            (b.isPointerDown = !0), (b.deltaX = 0), (b.deltaY = 0);
            var d = b.element.getBoundingClientRect(),
                f = c[0];
            (b.startX = f.clientX - d.left), (b.startY = f.clientY - d.top);
        }),
            (f.prototype.onPointerMove = function (a) {
                var b = this,
                    c = e(a);
                if (b.isPointerDown && 1 === c.length) {
                    var d = b.element.getBoundingClientRect(),
                        f = c[0],
                        g = f.clientX - d.left,
                        h = f.clientY - d.top;
                    (b.deltaX = g - b.startX), (b.deltaY = h - b.startY);
                    var i = !1;
                    if ((b.isPanning || (Math.sqrt(b.deltaX * b.deltaX + b.deltaY * b.deltaY) >= b.threshold && ((b.isPanning = !0), (i = !0))), b.isPanning)) {
                        var j = {};
                        (j.center = { x: g, y: h }), (j.deltaX = b.deltaX), (j.deltaY = b.deltaY), i ? l(b.element, "panstart", j) : l(b.element, "pan", j);
                    }
                }
            }),
            (f.prototype.computeInput = function (a) {
                var b = this,
                    c = b.element.getBoundingClientRect(),
                    d = e(a),
                    f = d[0],
                    g = f.clientX - c.left,
                    h = f.clientY - c.top;
                (b.deltaX = g - b.startX), (b.deltaY = h - b.startY);
                var i = {};
                return (i.center = { x: g, y: h }), (i.deltaX = b.deltaX), (i.deltaY = b.deltaY), i;
            }),
            (f.prototype.onPointerUp = function (a) {
                var b = this;
                b.isPanning && ((b.settings.manager.cancelNextClick = !0), l(b.element, "panend", b.computeInput(a))), (b.isPointerDown = !1), (b.isPanning = !1), (b.deltaX = 0), (b.deltaY = 0), (b.startX = 0), (b.startY = 0);
            }),
            (f.prototype.onPointerLeave = function (a) {
                var b = this;
                b.isPanning && l(b.element, "panend", b.computeInput(a)), (b.isPointerDown = !1), (b.isPanning = !1), (b.deltaX = 0), (b.deltaY = 0), (b.startX = 0), (b.startY = 0);
            }),
            (g.prototype.onPointerDown = function (a) {
                var b = this,
                    c = e(a);
                if (2 !== c.length) return (b.isPinching = !1), (b.startTouches = null), !0;
                var d = c[0],
                    f = c[1];
                b.startTouches = [
                    { clientX: d.clientX, clientY: d.clientY },
                    { clientX: f.clientX, clientY: f.clientY },
                ];
            }),
            (g.prototype.onPointerMove = function (a) {
                var b = this,
                    f = e(a);
                if (!b.isPinching && 2 === f.length) {
                    var g = b.startTouches[0],
                        h = b.startTouches[1],
                        i = f[0],
                        j = f[1],
                        k = c(g, h),
                        m = c(i, j);
                    if (0 !== k) {
                        var n = {};
                        if (((n.scale = m / k), 1 !== n.scale)) {
                            n.center = d(g, h);
                            var o = b.element.getBoundingClientRect();
                            (n.center.x -= o.left), (n.center.y -= o.top), (b.isPinching = !0), l(b.element, "pinch" + (n.scale < 1 ? "in" : "out"), n);
                        }
                    }
                }
            }),
            (g.prototype.onPointerUp = function (a) {
                var b = this;
                (b.isPinching = !1), (b.startTouches = null);
            });
        var m = !0;
        return (
            (h.prototype.handleEvent = function (a, b) {
                var c,
                    d,
                    e = this,
                    f = e.gestures,
                    g = f.length;
                for (c = 0; c < g; ++c) (d = f[c]), d[b] && d[b](a);
            }),
            (h.prototype.onPointerDown = function (a) {
                this.handleEvent(a, "onPointerDown");
            }),
            (h.prototype.onPointerUp = function (a) {
                this.handleEvent(a, "onPointerUp");
            }),
            (h.prototype.onPointerMove = function (a) {
                a.stopPropagation(), a.preventDefault(), this.handleEvent(a, "onPointerMove");
            }),
            (h.prototype.onPointerLeave = function (a) {
                this.handleEvent(a, "onPointerLeave");
            }),
            (h.prototype.onDocumentMouseOut = function (a) {
                a = a ? a : window.event;
                var b = a.relatedTarget || a.toElement;
                (b && "HTML" != b.nodeName) || this.handleEvent(a, "onPointerLeave");
            }),
            (h.prototype.onClick = function (a) {
                var b = this;
                return b.cancelNextClick ? ((b.cancelNextClick = !1), a.stopImmediatePropagation && a.stopImmediatePropagation(), a.stopPropagation(), a.preventDefault(), !1) : void b.handleEvent(a, "onClick");
            }),
            (h.prototype.addListeners = function () {
                var a = this,
                    b = a.element,
                    c = window.navigator;
                c.pointerEnabled
                    ? (b.addEventListener("pointerdown", a.onPointerDownHandler, !1),
                      b.addEventListener("pointermove", a.onPointerMoveHandler, !1),
                      b.addEventListener("pointerup", a.onPointerUpHandler, !1),
                      b.addEventListener("pointerleave", a.onPointerUpHandler, !1))
                    : (b.addEventListener("mousedown", a.onPointerDownHandler, !1),
                      b.addEventListener("mousemove", a.onPointerMoveHandler, !1),
                      b.addEventListener("mouseup", a.onPointerUpHandler, !1),
                      b.addEventListener("mouseleave", a.onPointerLeaveHandler, !1),
                      "undefined" != typeof window.ontouchstart &&
                          (b.addEventListener("touchstart", a.onPointerDownHandler, !1),
                          b.addEventListener("touchmove", a.onPointerMoveHandler, !1),
                          b.addEventListener("touchend", a.onPointerUpHandler, !1),
                          b.addEventListener("touchleave", a.onPointerLeaveHandler, !1))),
                    b.addEventListener("click", a.onClickHandler, !1),
                    document.addEventListener("mouseout", a.onDocumentMouseOutHandler, !1);
            }),
            (h.prototype.removeListeners = function () {
                var a = this,
                    b = a.element;
                b.removeEventListener("pointerdown", a.onPointerDownHandler, !1),
                    b.removeEventListener("pointermove", a.onPointerMoveHandler, !1),
                    b.removeEventListener("pointerup", a.onPointerUpHandler, !1),
                    b.removeEventListener("mousedown", a.onPointerDownHandler, !1),
                    b.removeEventListener("mouseup", a.onPointerUpHandler, !1),
                    b.removeEventListener("mousemove", a.onPointerMoveHandler, !1),
                    b.removeEventListener("mouseleave", a.onPointerLeaveHandler, !1),
                    b.removeEventListener("touchstart", a.onPointerDownHandler, !1),
                    b.removeEventListener("touchmove", a.onPointerMoveHandler, !1),
                    b.removeEventListener("touchend", a.onPointerUpHandler, !1),
                    b.removeEventListener("click", a.onClickHandler, !1),
                    document.removeEventListener("mouseout", a.onDocumentMouseOutHandler, !1);
            }),
            (h.prototype.destroy = function () {
                var b = this,
                    c = b.element;
                b.removeListeners(), a.removeClass(c, "prodibiActionable"), (c.prodibiTouchManager = null), delete c.prodibiTouchManager;
            }),
            a.defaults(window.Prodibi.event, { TouchManager: h, addEventMousewheel: j, removeEventMousewheel: k })
        );
    })(Prodibi.extensions, Prodibi.event)),
    (window.Prodibi.imageLoader = (function (a, b, c, d) {
        function e(a, b) {
            var c = b.state,
                d = c.viewport,
                e = d.imageSource;
            null !== e && e.setTile(b.highIsLoaded ? "/01/" : "/00/", c.tileLevel, c.row, c.column, a);
        }
        function f(a, b) {
            if (null != b) {
                var c = b.state;
                if (null != c) {
                    var d = c.viewport;
                    if (null != d) {
                        var e = d.imageSource;
                        if (null != e) {
                            var f = e.getRequest(c.tileLevel, c.row, c.column);
                            null != f && f.destroy(), e.setRequest(c.tileLevel, c.row, c.column, null);
                        }
                    }
                }
            }
        }
        function g(a, b, d, e, f, g) {
            var h,
                i = d.viewport,
                j = i.imageSource;
            if (((h = j.getTile("/01/", d.tileLevel, d.row, d.column)), null === h))
                if (((h = j.getTile("/00/", d.tileLevel, d.row, d.column)), null === h)) {
                    var k = j.getRequest(d.tileLevel, d.row, d.column);
                    if (null === k) {
                        var k = new c(a, b, d, e, f, g);
                        return j.setRequest(d.tileLevel, d.row, d.column, k), k;
                    }
                    var l = k.state;
                    (l.x = d.x), (l.y = d.y), (l.adjustment = d.adjustment), (l.redrawId = d.redrawId), (l.tileLevel = d.tileLevel), (l.column = d.column), (l.row = d.row);
                } else i.redrawId === d.redrawId && i.drawingContext.drawImage(h, d.x, d.y, Math.ceil(h.width * d.adjustment), Math.ceil(h.height * d.adjustment));
            else i.redrawId === d.redrawId && (i.drawingContext.drawImage(h, d.x, d.y, Math.ceil(h.width * d.adjustment), Math.ceil(h.height * d.adjustment)), i.tileCacheHit++);
            return null;
        }
        void 0 !== window.createImageBitmap
            ? function (a, b) {
                  a instanceof ImageBitmap
                      ? e(bitmap, b)
                      : window.createImageBitmap(a).then(function (a) {
                            e(a, b);
                        });
              }
            : e;
        return a.defaults(d, { preLoadImageWidthCache: new d.ImageLoader(d.loadLowAndHigh, e, e, f), loadImageWidthCache: new d.ImageLoader(g, d.drawTile, d.drawTile, f) });
    })(Prodibi.extensions, Prodibi.source, Prodibi.ProgressiveImage, Prodibi.imageLoader)),
    (function (a) {
        var b = a.ImageSource.prototype;
        (b.isPointIn = function (a, b) {
            return null !== a && null !== b && !(0 > a || a > 1) && !(0 > b || b > this.aspectRatio);
        }),
            (b.getTile = function (a, b, c, d) {
                var e = this;
                if (null == e.tileCache) return null;
                var f = a + b + "$" + c + "$" + d,
                    g = e.tileCache[f];
                return null == g ? null : g;
            }),
            (b.setRequest = function (a, b, c, d) {
                var e = this;
                null == e.requestCache && (e.requestCache = {});
                var f = a + "$" + b + "$" + c;
                e.requestCache[f] = d;
            }),
            (b.getRequest = function (a, b, c) {
                var d = this;
                if (null == d.requestCache) return null;
                var e = a + "$" + b + "$" + c,
                    f = d.requestCache[e];
                return null == f ? null : f;
            });
    })(Prodibi.core),
    (function (a, b, c, d, e, f) {
        function g(a) {
            var b = this;
            null != a.drawingContext &&
                null != a.drawingContext.canvas &&
                ((b.viewport = a),
                (b.selfUpdate = function () {
                    b.update();
                }),
                (b.requestId = window.requestAnimationFrame(b.selfUpdate)));
        }
        function h(a, b, c, d, e) {
            var f = a.imageSource,
                g = f.width,
                h = Math.pow(2, f.maxLevel - d - e),
                i = b.canvas;
            c && b.clearRect(0, 0, Math.ceil(i.width), Math.ceil(i.height)),
                b.save(),
                b.translate(-a.imageToScreenDistance(a.x, e, g) / a.devicePixelRatio, -a.imageToScreenDistance(a.y, e, g) / a.devicePixelRatio),
                b.scale(h, h),
                b.drawImage(a.fullPreviewCanvas, 0, 0),
                b.restore();
        }
        function i(a, b, c, d, e) {
            var f = a.imageSource,
                g = f.width,
                h = Math.pow(2, a.lastDrawCanvasZoom - d),
                i = b.canvas;
            if ((c && b.clearRect(0, 0, Math.ceil(i.width), Math.ceil(i.height)), b.save(), e)) {
                var j = (1 - h) * a.devicePixelRatio;
                b.translate(j * a.animationX, j * a.animationY);
            } else b.translate(-a.imageToScreenDistance(a.x, d, g) / a.devicePixelRatio, -a.imageToScreenDistance(a.y, d, g) / a.devicePixelRatio);
            b.scale(h, h), b.drawImage(a.lastDrawCanvas, 0, 0), b.restore();
        }
        function j(a, b, c, d, e, f) {
            var g = b.canvas;
            b.clearRect(0, 0, Math.ceil(g.width), Math.ceil(g.height)), h(a, b, !1, c, d), f || i(a, b, !1, d, e);
        }
        function k(a) {
            var b,
                c,
                d = a.renderStrategy,
                e = d.low,
                f = d.high,
                g = a.imageSource,
                h = g.tileSize,
                i = g.maxLevel - a.previewLevel,
                j = Math.pow(2, i),
                k = j / g.width,
                l = h * k,
                m = Math.ceil(1 / l),
                n = Math.ceil(g.aspectRatio / l);
            0 === m && (m = 1),
                0 === n && (n = 1),
                (a.fullPreviewCanvas = document.createElement("canvas")),
                (a.fullPreviewCanvas.width = Math.ceil(g.width / j)),
                (a.fullPreviewCanvas.height = Math.ceil(g.height / j)),
                (a.fullPreviewDrawingContext = a.fullPreviewCanvas.getContext("2d")),
                (a.fullPreviewCanvasZoom = i);
            var o,
                p,
                q = a.fullPreviewDrawingContext,
                r = a.previewLevel;
            for (b = 0; b < m; b++)
                for (o = b * h, c = 0; c < n; c++) {
                    p = c * h;
                    var s = g.getTile(f, r, c, b);
                    null === s && (s = g.getTile(e, r, c, b)), null !== s && q.drawImage(s, o, p, s.width, s.height);
                }
        }
        function l(a) {
            "zoom" === a.settings.mode &&
                ((a.isCacheInitialized = !1),
                (a.lastDrawCanvas = null),
                (a.lastDrawDrawingContext = null),
                (a.lastDrawCanvasZoom = null),
                (a.animationX = null),
                (a.animationY = null),
                (a.animationStartZoom = null),
                (a.animationEndZoom = null),
                (a.initialX = null),
                (a.initialY = null),
                (a.previewPageX = null),
                (a.previewPageY = null),
                (a.dragStartX = null),
                (a.dragStartY = null),
                (a.dragEndX = null),
                (a.dragEndY = null),
                (a.dragZoom = null),
                (a.currentZoomAnimation = null),
                (a.currentPanAnimation = null),
                (a.currentDrawAnimation = null),
                (a.tileCacheHit = 0),
                (a.previewLevel = a.imageSource.maxLevel - Math.floor(a.initialZoom)));
        }
        function m(a, b, c) {
            var d = a;
            d.moveToNewViewportOrigin(d.animationX, d.animationY, d.zoomFactor, b), j(d, d.drawingContext, d.previewLevel, b, !0, c), r(d.prodibiImage, "prodibi.image.zoom");
        }
        function n(a) {
            return null == a.element.mousewheelHandlerTracking ? (e.addEventMousewheel(a.element, d.imediateAndDebounced(a.onWheelHandler.bind(a), 500)), !0) : (e.removeEventMousewheel(a.element), !1);
        }
        function o() {
            var a = this,
                b = a.element;
            (a.onDragHandler = d.throttle(a.onDrag.bind(a), 16)), b.addEventListener("panstart", a.onDragHandler, !1), b.addEventListener("panend", a.onDragHandler, !1), b.addEventListener("pan", a.onDragHandler, !1);
        }
        function p() {
            var a = this,
                b = a.element;
            null !== a.onDragHandler && (b.removeEventListener("panstart", a.onDragHandler, !1), b.removeEventListener("panend", a.onDragHandler, !1), b.removeEventListener("pan", a.onDragHandler, !1), (a.onDragHandler = null));
        }
        function q() {
            var a = this,
                b = a.settings;
            if ("zoom" === b.mode) {
                var c = a.element;
                void 0 === c.prodibiTouchManager &&
                    (new e.TouchManager(a.element),
                    (a.onTapHandler = a.onTap.bind(a)),
                    (a.onPinchOutHandler = a.onPinchOut.bind(a)),
                    (a.onPinchInHandler = a.onPinchIn.bind(a)),
                    c.addEventListener("click", a.onTapHandler, !1),
                    c.addEventListener("pinchout", a.onPinchOutHandler, !1),
                    c.addEventListener("pinchin", a.onPinchInHandler, !1),
                    b.enablePanOnFirstZoom || o.call(this)),
                    n(a);
            }
        }
        var r = c.sendEvent,
            s = c.sendCompleteEvent,
            t = c.sendHQCompleteEvent,
            u = c.draw,
            v = e.getResizeThrottler(),
            w = e.stopPropagation;
        (g.prototype.update = function () {
            var a = this,
                b = a.viewport;
            a.requestId = window.requestAnimationFrame(a.selfUpdate);
            var c = b.drawingContext.canvas;
            b.drawingContext.clearRect(0, 0, Math.ceil(c.width), Math.ceil(c.height)), b.drawLowAndHighWithCache(null, null, null) && (window.cancelAnimationFrame(a.requestId), b.animateDrawEnd());
        }),
            (a.Viewport = function (a, c, d, e, f) {
                var g = this;
                b.call(g, a, c, d, e, f), l(g);
            });
        var x = b.prototype;
        (x.drawFromCache = function (a, b, c) {
            var d = this,
                e = d.renderStrategy;
            return u(d, d.x, d.y, d.width, d.height, d.zoomFactor, ++d.redrawId, e.loadLowAndHighFromCache, null, null, null, !1), !0;
        }),
            (x.drawLowAndHighWithCache = function (a, b, c) {
                var d = this,
                    e = d.renderStrategy;
                return (
                    (d.tileCacheHit = 0),
                    (d.tileRemainingCount = d.tileRemainingCountLow = d.tileRemainingCountHigh = u(d, d.x, d.y, d.width, d.height, d.zoomFactor, ++d.redrawId, e.loadImageWidthCache, a, b, c, !0)),
                    d.tileCacheHit === d.tileRemainingCount
                );
            }),
            (x.moveToNewViewportOrigin = function (a, b, c, d) {
                var e = this,
                    f = (Math.pow(2, c) - Math.pow(2, d)) / e.imageSource.width;
                (e.x = a * f * e.devicePixelRatio + e.x), (e.y = b * f * e.devicePixelRatio + e.y), (e.zoomFactor = d);
            }),
            (x.zoomPercentageToZoom = function (a) {
                var b = this,
                    c = b.imageSource;
                return (a = Math.min(Math.max(a, 0), 100)), (-c.maxLevel * a) / b.devicePixelRatio / 100 + c.maxLevel;
            }),
            (x.screenToImageDistance = function (a, b, c) {
                return a * this.devicePixelRatio * (Math.pow(2, b) / c);
            }),
            (x.imageToScreenDistance = function (a, b, c) {
                return (a * this.devicePixelRatio * c) / Math.pow(2, b);
            }),
            (x.animateZoomFromLastDraw = function (a) {
                var b = this;
                b.moveToNewViewportOrigin(b.animationX, b.animationY, b.zoomFactor, a), i(b, b.drawingContext, !0, a, !0), r(b.prodibiImage, "prodibi.image.zoom");
            }),
            (x.animateZoomEnd = function () {
                var a = this;
                a.moveToNewViewportOrigin(a.animationX, a.animationY, a.zoomFactor, a.currentZoomAnimation.sequence[0].endValue),
                    (a.currentZoomAnimation = null),
                    (a.animationX = null),
                    (a.animationY = null),
                    (a.animationStartZoom = null),
                    (a.animationEndZoom = null),
                    (a.lastDrawCanvas = null),
                    (a.lastDrawDrawingContext = null),
                    (a.lastDrawCanvasZoom = null),
                    a.drawLowAndHighWithCache(null, null, null),
                    r(a.prodibiImage, "prodibi.image.zoom"),
                    r(a.prodibiImage, "prodibi.image.zoomEnd");
            }),
            (x.preloadWithCache = function (a, b, c, d, e, f, g, h) {
                var i = this,
                    j = i.renderStrategy;
                u(i, a, b, c, d, e, 0, j.preLoadImageWidthCache, f, g, h, !0);
            }),
            (x.zoom = function (a, b, c) {
                var d = this,
                    e = d.currentZoomAnimation;
                if (null === e) {
                    null !== d.currentPanAnimation && (d.currentPanAnimation.cancel(), (d.currentPanAnimation = null));
                    var g = d.zoomFactor,
                        h = g + a;
                    (h = Math.min(h, d.initialZoom)), (h = Math.max(h, 0));
                    var i = !1;
                    0 === g && 0 === h && ((h = a = d.initialZoom), (i = !0)),
                        (d.animationX = b),
                        (d.animationY = c),
                        (d.animationStartZoom = g),
                        (d.animationEndZoom = h),
                        r(d.prodibiImage, "prodibi.image.zoomStart"),
                        (d.animationX = b),
                        (d.animationY = c);
                    var j = null;
                    d.initLastDrawCanvas(!0),
                        a < 0
                            ? (j = d.animateZoomFromLastDraw.bind(d))
                            : ((j = function (a) {
                                  m(d, a, i);
                              }),
                              k(d, null));
                    var l = (Math.pow(2, g) - Math.pow(2, h)) / d.imageSource.width,
                        n = b * l * d.devicePixelRatio + d.x,
                        o = c * l * d.devicePixelRatio + d.y;
                    d.preloadWithCache(n, o, d.width, d.height, h, null, null, null),
                        (d.currentZoomAnimation = f.create()),
                        d.currentZoomAnimation.zoom({ startZoom: g, endZoom: h, animateZoom: j, animateZoomComplete: d.animateZoomEnd.bind(d) });
                }
            }),
            (x.initLastDrawCanvas = function (a) {
                var b = this;
                (b.lastDrawCanvas = document.createElement("canvas")),
                    (b.lastDrawCanvas.width = b.width),
                    (b.lastDrawCanvas.height = b.height),
                    (b.lastDrawDrawingContext = b.lastDrawCanvas.getContext("2d")),
                    (b.lastDrawCanvasZoom = b.zoomFactor),
                    a
                        ? b.lastDrawDrawingContext.drawImage(b.drawingContext.canvas, 0, 0)
                        : b.lastDrawDrawingContext.drawImage(
                              b.drawingContext.canvas,
                              b.imageToScreenDistance(b.x, b.zoomFactor, b.imageSource.width) / b.devicePixelRatio,
                              b.imageToScreenDistance(b.y, b.zoomFactor, b.imageSource.width) / b.devicePixelRatio
                          );
            }),
            (x.checkBounds = function (a, b, c, d) {
                return c >= d ? (a + b > 0 ? (b = -a) : a + b + c < d && (b = d - a - c)) : a + b < 0 ? (b = -a) : a + b + c > d && (b = d - a - c), b;
            }),
            (x.checkAndSetPanXY = function (a, b, c, d, e, f) {
                var g = this,
                    h = g.screenToImageDistance(g.width / g.devicePixelRatio, e, f),
                    i = g.screenToImageDistance(g.height / g.devicePixelRatio, e, f),
                    j = g.imageSource.aspectRatio;
                g.x <= 0 || g.x + h >= 1
                    ? g.x <= 0 && c <= 0
                        ? (Math.abs(a) < 1e-8 && (g.x = 0), (g.x += g.checkBounds(g.x, c, h, 1)))
                        : g.x + h >= 1 && c >= 0
                        ? (g.x += g.checkBounds(g.x, c, h, 1))
                        : (g.x = a)
                    : (g.x += g.checkBounds(g.x, c, h, 1)),
                    g.y <= 0 || g.y + i >= j
                        ? g.y <= 0 && d <= 0
                            ? (Math.abs(b) < 1e-8 && (g.y = 0), (g.y += g.checkBounds(g.y, d, i, j)))
                            : g.y + i >= j && d >= 0
                            ? (g.y += g.checkBounds(g.y, d, i, j))
                            : (g.y = b)
                        : (g.y += g.checkBounds(g.y, d, i, j));
            }),
            (x.setPanXY = function (a, b) {
                var c = this,
                    d = c.zoomFactor,
                    e = c.imageSource.width,
                    f = c.screenToImageDistance(a, d, e),
                    g = c.screenToImageDistance(b, d, e),
                    h = c.initialX - f,
                    i = c.initialY - g;
                c.checkAndSetPanXY(c.initialX - f, c.initialY - g, h - c.x, i - c.y, d, e);
            }),
            (x.pan = function (a, b, c, d, e, f) {
                var h = this;
                null === h.currentZoomAnimation && (h.setPanXY(e, f), null === h.currentDrawAnimation && (h.currentDrawAnimation = new g(h)));
            }),
            (x.animatePanStart = function () {
                var a = this;
                (a.initialX = a.x), (a.initialY = a.y);
            }),
            (x.animateDrawEnd = function () {
                this.currentDrawAnimation = null;
            }),
            (x.animatePanEnd = function () {
                var a = this;
                (a.currentPanAnimation = null),
                    (a.fullPreviewCanvas = null),
                    (a.fullPreviewDrawingContext = null),
                    (a.fullPreviewCanvasZoom = null),
                    (a.lastDrawCanvas = null),
                    (a.lastDrawDrawingContext = null),
                    (a.lastDrawCanvasZoom = null),
                    (a.initialX = null),
                    (a.initialY = null),
                    (a.previewPageX = null),
                    (a.previewPageY = null),
                    a.drawLowAndHighWithCache(null, null, null);
            }),
            (a.Viewport.prototype = x);
        var y = Prodibi.Image.prototype;
        (y.enhanceToZoom = function () {
            var a = this,
                b = a.viewport;
            l(b), q.call(a);
        }),
            (y.draw = function () {
                var a = this;
                "zoom" === a.settings.mode ? a.viewport.drawLowAndHighWithCache(s, null, t) : a.viewport.drawLowAndHigh(s, null, t);
            }),
            (y.onTap = function (a) {
                var b = this,
                    c = b.element.getBoundingClientRect();
                b.zoom(-b.settings.zoomStep, a.clientX - c.left, a.clientY - c.top);
            }),
            (y.onPinchOut = function (a) {
                var b = this,
                    c = a.detail.center;
                b.zoom(-b.settings.zoomStep, c.x, c.y);
            }),
            (y.onPinchIn = function (a) {
                var b = this,
                    c = a.detail.center;
                b.zoom(b.settings.zoomStep, c.x, c.y);
            }),
            (y.onDrag = function (a) {
                var b = this,
                    c = a.detail.center,
                    d = b.viewport;
                return (
                    "panstart" === a.type && (b.translateStart(), (d.dragStartX = c.x), (d.dragStartY = c.y), (d.dragZoom = d.zoomFactor), r(d.prodibiImage, "prodibi.image.panStart")),
                    "panend" === a.type
                        ? ((d.dragEndX = c.x), (d.dragEndY = c.y), r(d.prodibiImage, "prodibi.image.panEnd"), void (d.dragStartX = d.dragStartY = d.dragEndX = d.dragEndY = d.dragZoom = null))
                        : (b.translate(c.x, c.y, null, null, a.detail.deltaX, a.detail.deltaY), void r(d.prodibiImage, "prodibi.image.pan"))
                );
            }),
            (y.onWheelHandler = function (a, b) {
                a.preventDefault();
                var c = this,
                    d = b < 0 ? c.settings.zoomStep : -c.settings.zoomStep;
                if (!n(c)) {
                    var e,
                        f = a.pageX,
                        g = a.pageY,
                        h = document.documentElement;
                    (e = void 0 !== c.element.getBoundingClientRect ? c.element.getBoundingClientRect() : { top: 0, left: 0 }),
                        (f -= e.left + window.pageXOffset - h.clientLeft),
                        (g -= e.top + window.pageYOffset - h.clientTop),
                        c.zoom(d, f, g);
                }
            });
        var z = y.addEvents;
        (y.addEvents = function () {
            q.call(this), z.call(this);
        }),
            (y.removeEvents = function () {
                var a = this,
                    b = a.element;
                b.prodibiTouchManager && b.prodibiTouchManager.destroy(),
                    null !== a.onTapHandler && b.removeEventListener("click", a.onTapHandler, !1),
                    null !== a.onPinchOutHandler && b.removeEventListener("pinchout", a.onPinchOutHandler, !1),
                    null !== a.onPinchInHandler && b.removeEventListener("pinchin", a.onPinchInHandler, !1),
                    p.call(a),
                    e.removeEventMousewheel(a.element),
                    null !== a.onResizeHandler && (v.removeHandler(a.onResizeHandler), (a.onResizeHandler = null)),
                    null !== a.element && a.element.removeEventListener("contextmenu", w, !1);
            }),
            (y.dispose = function () {
                this.removeEvents(), this.viewport.dispose();
            }),
            (y.zoom = function (a, b, c) {
                var d = this,
                    e = d.viewport,
                    f = d.imageSource,
                    g = f.width,
                    h = e.zoomFactor,
                    i = null,
                    j = null;
                null == d.onDragHandler && o.call(d),
                    void 0 === a ? (a = -2) : "string" == typeof a && ((a = e.zoomPercentageToZoom(parseFloat(a))), (a -= h)),
                    void 0 === b && (i = e.width / (2 * e.devicePixelRatio)),
                    void 0 === c && (j = e.height / (2 * e.devicePixelRatio)),
                    null === i && null === j && ((i = b), (j = c)),
                    f.isPointIn(e.screenToImageDistance(i, h, g) + e.x, e.screenToImageDistance(j, h, g) + e.y) && e.zoom(a, i, j);
            }),
            (y.translateStart = function () {
                this.viewport.animatePanStart();
            }),
            (y.translate = function (a, b, c, d, e, f) {
                this.viewport.pan(a, b, c, d, e, f);
            }),
            (y.resize = function () {
                var a = this,
                    b = c.computeCssSize(a.element, a.settings.widthMode, a.settings.heightMode, a.imageSource.aspectRatio, a.settings.width, a.settings.height);
                (a.cssSize.height === b.height && a.cssSize.width === b.width) || ((a.viewport.drawingContext = null), (a.viewport.prodibiImage = null), (a.viewport = null), a.setDimensions(), a.setNewViewportAndDraw());
            }),
            (y.minZoom = function () {
                var a = this.viewport;
                return a.zoomToZoomPercentage(a.initialZoom);
            }),
            (y.getZoom = function () {
                var a = this.viewport;
                return a.zoomToZoomPercentage(a.zoomFactor);
            }),
            (y.reDraw = function () {
                var a = this,
                    b = a.viewport,
                    c = b.drawingContext.canvas;
                b.drawingContext.clearRect(0, 0, Math.ceil(c.width), Math.ceil(c.height)), a.draw();
            });
    })(Prodibi, Prodibi.Viewport, Prodibi.core, Prodibi.extensions, Prodibi.event, Prodibi.animate),
    (window.Prodibi.statistics = (function (a, b, c) {
        function d(a, b) {
            var c;
            for (var d in b) (c = b[d]), "function" != typeof c && "object" != typeof c && (a[d] = c);
            return a;
        }
        function e() {
            return 9007199254740992 - Date.now() + Math.floor(1e5 * Math.random());
        }
        function f() {
            try {
                if (null == window.localStorage) return e();
                var a = window.localStorage.getItem("prodibiSessionId");
                return null == a && ((a = e()), window.localStorage.setItem("prodibiSessionId", a)), a;
            } catch (b) {
                return e();
            }
        }
        function g(a) {
            var d = this;
            (d.pageTimingRecorded = !1),
                (d.ip = null),
                (d.account = a),
                (d.userId = f()),
                (d.sessionId = e()),
                (d.statBuffer = []),                
                (d.onLoadHandler = d.onPageLoad.bind(d)),
                "complete" === document.readyState ? d.pageTiming() : document.addEventListener("readystatechange", d.onLoadHandler, !1),
                window.addEventListener("beforeunload", d.pageUnload.bind(d), !1),
                c.xhr(
                    "GET",
                    b.ip,
                    null,
                    null,
                    null,
                    function (a) {
                        d.ip = a;
                    },
                    null
                );
        }
        function h() {
            return null === j && (j = new g(a.getSettings().account)), j;
        }
        var i = b.stat;
        (g.prototype.onPageLoad = function () {
            if ("complete" === document.readyState) {
                var a = this;
                document.removeEventListener("readystatechange", a.onLoadHandler, !1),
                    requestAnimationFrame(function () {
                        a.pageTiming();
                    });
            }
        }),
            (g.prototype.pageUnload = function () {                
            }),
            (g.prototype.pageTiming = function () {
                var a = this;
                if (!a.pageTimingRecorded && null != a.account) {
                    var b = {
                            account: a.account,
                            userId: a.userId,
                            sessionId: a.sessionId,
                            ip: a.ip,
                            action: "pageload",
                            date: Date.now(),
                            url: window.location.href,
                            referrer: "referrer" in document ? "" : document.referrer,
                            innerWidth: window.innerWidth,
                            innerHeight: window.innerHeight,
                            devicePixelRatio: null == window.devicePixelRatio ? 0 : window.devicePixelRatio,
                        },
                        c = window.performance || window.msPerformance || window.webkitPerformance;
                    if ((null != c && (null != c.timing && d(b, c.timing), null != c.navigation && d(b, c.navigation), null != c.memory && d(b, c.memory)), null != window.screen)) {
                        d(b, window.screen);
                        var e = screen.orientation || screen.mozOrientation || screen.msOrientation;
                        "string" == typeof e ? (b.orientation = e) : "object" == typeof e && null != e.type && (b.orientation = e.type);
                    }
                    if (null != window.navigator) {
                        var f = window.navigator;
                        (b.platform = f.platform), (b.ua = f.userAgent), (b.language = f.language);
                        var g = f.connection || f.mozConnection || f.webkitConnection;
                        null != g && d(b, g);
                    }
                    (a.pageTimingRecorded = !0), a.statBuffer.push(b), a.doPost(!0);
                }
            }),
            (g.prototype.doPost = function (a) {                
            }),
            (g.prototype.post = function (a) {            
            }),
            (g.prototype.addDisplay = function (a, b) {
                var c = this;
                if ((c.pageTiming(), null != a)) {
                    var d = a.imageSource,
                        e = a.viewport,
                        f = null != a.settings && null != a.settings.account ? a.settings.account : c.account;
                    null == c.account && (c.account = f);
                    var g = {
                        account: f,
                        userId: c.userId,
                        sessionId: c.sessionId,
                        ip: c.ip,
                        id: d.src,
                        x: e.x,
                        y: e.y,
                        width: e.width,
                        height: e.height,
                        zoom: e.zoomFactor,
                        devicePixelRatio: e.devicePixelRatio,
                        action: null == b ? "display" : b,
                        date: Date.now(),
                    };                    
                }
            }),
            (g.prototype.addEvent = function (a, b) {
                if (null != a && null != b) {
                    var c = this,
                        d = a.imageSource,
                        e = null != a.settings && null != a.settings.account ? a.settings.account : c.account;
                    null == c.account && (c.account = e), c.pageTiming();
                    var f = { account: e, userId: c.userId, sessionId: c.sessionId, ip: c.ip, id: d.src, action: b, date: Date.now() };                    
                }
            }),
            (g.prototype.addZoom = function (a, b, c, d, e) {
                var f = this,
                    g = a.imageSource,
                    h = g.width,
                    i = null != a.settings && null != a.settings.account ? a.settings.account : f.account;
                null == f.account && (f.account = i), f.pageTiming();
                var j = {
                    account: i,
                    userId: f.userId,
                    sessionId: f.sessionId,
                    ip: f.ip,
                    id: g.src,
                    x: a.x,
                    y: a.y,
                    width: a.width,
                    height: a.height,
                    zoom: a.zoomFactor,
                    devicePixelRatio: a.devicePixelRatio,
                    startTouchX: a.screenToImageDistance(b, d, h) + a.x,
                    startTouchY: a.screenToImageDistance(c, d, h) + a.y,
                    startZoom: d,
                    endZoom: e,
                    action: "zoom",
                    date: Date.now(),
                };                
            }),
            (g.prototype.addPan = function (a, b, c) {
                var d = this,
                    e = a.viewport,
                    f = e.imageSource,
                    g = f.width,
                    h = null != a.settings && null != a.settings.account ? a.settings.account : d.account;
                null == d.account && (d.account = h), d.pageTiming();
                var i = {
                    account: h,
                    userId: d.userId,
                    sessionId: d.sessionId,
                    ip: d.ip,
                    id: f.src,
                    x: e.x,
                    y: e.y,
                    width: e.width,
                    height: e.height,
                    zoom: e.zoomFactor,
                    devicePixelRatio: e.devicePixelRatio,
                    startX: e.initialX,
                    startY: e.initialY,
                    startTouchX: e.screenToImageDistance(e.dragStartX, e.dragZoom, g) + e.initialX,
                    startTouchY: e.screenToImageDistance(e.dragStartY, e.dragZoom, g) + e.initialY,
                    endTouchX: e.screenToImageDistance(b, e.zoomFactor, g) + e.x,
                    endTouchY: e.screenToImageDistance(c, e.zoomFactor, g) + e.y,
                    startZoom: e.dragZoom,
                    endZoom: e.zoomFactor,
                    action: "pan",
                    date: Date.now(),
                };                
            });
        var j = null;
        return { getStats: h };
    })(Prodibi, Prodibi.source, Prodibi.extensions)),
    (function (a) {
        var b = a.getStats,
            c = function (a) {
                var c = a.detail,
                    d = c.viewport;
                b().addZoom(d, d.animationX, d.animationY, d.animationStartZoom, d.animationEndZoom);
            },
            d = function (a) {
                var c = a.detail,
                    d = c.viewport;
                b().addPan(c, d.dragEndX, d.dragEndY);
            };
        document.body.addEventListener(
            "prodibi.image.create",
            function (a) {
                var e = a.detail,
                    f = e.element;
                f.addEventListener("prodibi.image.zoomStart", c, !1), f.addEventListener("prodibi.image.panEnd", d, !1), b().addDisplay(e, "create");
            },
            !1
        ),
            document.body.addEventListener(
                "prodibi.image.destroy",
                function (a) {
                    var e = ev.detail,
                        f = e.element;
                    f.removeEventListener("prodibi.image.zoomStart", c, !1), f.removeEventListener("prodibi.image.panEnd", d, !1), b().addEvent(e, "destroy");
                },
                !1
            );
    })(Prodibi.statistics),
    (window.Prodibi.event = (function (a, b) {
        function c() {
            return null === d && ((d = new b.EventThrottler({ eventName: "scroll" })), d.connect()), d;
        }
        var d = null;
        return a.defaults(window.Prodibi.event, { getScrollThrottler: c });
    })(Prodibi.extensions, Prodibi.event)),
    (function (a) {
        function b(a) {
            var b = "translateX(" + a + "%)",
                c = this.element.style;
            c.msTransform = c.mozTransform = c.webkitTransform = c.transform = b;
        }
        function c(a) {
            this.element.style.opacity = a;
        }
        function d() {
            var a = this.element.style;
            (a.display = this.startVisibility), (a.opacity = 1);
        }
        function e() {
            this.element.style.display = this.endVisibility;
        }
        (a.Animate.prototype.fade = function (a, b, f, g) {
            var h = this;
            (h.requestId = window.requestAnimationFrame(h.selfUpdate)),
                (h.sequence = [{ element: a, startValue: g ? 0 : 1, endValue: g ? 1 : 0, startVisibility: "block", endVisibility: g ? "block" : "none", init: d, animate: c, onComplete: f, complete: e }]),
                (h.startTime = null),
                (h.duration = b);
        }),
            (a.Animate.prototype.slideReplace = function (a, c, f, g, h, i) {
                var j = this;
                (j.requestId = window.requestAnimationFrame(j.selfUpdate)),
                    (j.sequence = [
                        { element: a, startValue: 0, endValue: i ? -100 : 100, startVisibility: "block", endVisibility: "none", init: d, animate: b, onComplete: g, complete: e },
                        { element: c, startValue: i ? 100 : -100, endValue: 0, startVisibility: "block", endVisibility: "block", init: d, animate: b, onComplete: h, complete: e },
                    ]),
                    (j.startTime = null),
                    (j.duration = f);
            });
    })(window.Prodibi.animate),
    (Prodibi.animate = (function (a, b, c) {
        function d(b, c) {
            null == b.prodibiCssAnimationHandler &&
                ((b.prodibiCssAnimationName = c),
                (b.prodibiCssAnimationHandler = function (d) {
                    var e = [];
                    null != b.classList &&
                        (b.classList.forEach(function (a) {
                            a.indexOf("touchTarget") !== -1 && e.push(a);
                        }),
                        e.forEach(function (a) {
                            b.classList.remove(a);
                        })),
                        a.addClass(b, c, "cbutton--click"),
                        g(b, function () {
                            a.removeClass(b, c, "cbutton--click"),
                                null != b.classList &&
                                    e.forEach(function (a) {
                                        b.classList.add(a);
                                    });
                        });
                }),
                b.addEventListener("click", b.prodibiCssAnimationHandler, !1));
        }
        function e(a) {
            a.removeEventListener("click", a.prodibiCssAnimationHandler, !1);
        }
        var f = b.animationEndEventName(),
            g = function (a, b) {
                var c = function (a) {
                    return null == a ? void b() : void (a.target === this && (this.removeEventListener(f, c, !1), b()));
                };
                "" !== f ? a.addEventListener(f, c, !1) : c();
            };
        return a.defaults(c, { addAnimationOnClick: d, removeAnimationOnClick: e });
    })(Prodibi.extensions, Prodibi.features, Prodibi.animate)),
    (window.Prodibi.statistics = (function (a) {
        var b = a.getStats;
        document.body.addEventListener(
            "prodibi.mediaView.open",
            function (a) {
                var c = a.detail.mediaView,
                    d = b();
                if (null != c && null != c.current) {
                    var e = c.current.prodibiImage;
                    d.addEvent(e, "mediaViewOpen"), d.addEvent(e, "mediaViewShowImage");
                }
            },
            !1
        ),
            document.body.addEventListener(
                "prodibi.mediaView.close",
                function (a) {
                    var c = a.detail.mediaView,
                        d = b();
                    if (null != c && null != c.current) {
                        var e = c.current.prodibiImage;
                        d.addEvent(e, "mediaViewHideImage"), d.addEvent(e, "mediaViewClose");
                    }
                },
                !1
            ),
            document.body.addEventListener(
                "prodibi.mediaView.change",
                function (a) {
                    var c = a.detail,
                        d = b();
                    null != c.old && null != c.new && (d.addEvent(c.old.prodibiImage, "mediaViewHideImage"), d.addEvent(c.new.prodibiImage, "mediaViewShowImage"));
                },
                !1
            );
    })(Prodibi.statistics)),
    (function (a, b, c, d, e, f, g, h, i) {
        function j() {
            return e || window.Prodibi.Api;
        }
        function k(a) {
            return !a || !a.trim();
        }
        function l(a, c) {
            if (null != a) {
                var e = this;
                (e.visible = e.animating = !1),
                    (e.viewer = e.current = e.previous = e.next = e.sliderCursors = e.title = e.download = e.info = null),
                    (e.infoMenu = null),
                    (e.currentIndex = 0),
                    (e.settings = d.defaults(c || {}, {
                        containerModel: null,
                        keyboardControls: !0,
                        openAnimation: !0,
                        startOpen: !1,
                        keepOpen: !1,
                        openTriggers: null,
                        enableFullScreen: !1,
                        fullScreenAttributes: { heightMode: "window", widthMode: "window", mode: "zoom", position: "fit", autoResize: !0, mediaView: !1 },
                    })),
                    (e.commands = ["zoomIn", "zoomOut", "next", "previous", "close", "favorite"]),
                    (e.commandHandlers = [
                        e.zoomIn.bind(e),
                        e.zoomOut.bind(e),
                        function () {
                            e.change("next");
                        },
                        function () {
                            e.change("previous");
                        },
                        e.close.bind(e),
                        e.favorite.bind(e),
                    ]),
                    (e.openHandler = e.open.bind(e)),
                    (e.zoomHandler = e.zoom.bind(e)),
                    (e.keyDownHandler = e.onKeydown.bind(e)),
                    (e.infoHandler = e.onInfo.bind(e)),
                    (e.downloadHelper = null),
                    (e.downloadHandler = null),
                    (e.lastHTMLOverflowY = null),
                    (e.lastBODYOverflowY = null),
                    null == a.length && (a = [a]),
                    e.add(a),
                    e.initialize(),
                    b.dispatchEvent(document.body, "prodibi.mediaView.initialized", { mediaView: e });
            }
        }
        function m(a, b) {
            var c = null;
            return (
                null == b
                    ? (c = 0)
                    : d.isInteger(b)
                    ? (c = b)
                    : "string" == typeof b
                    ? (c = a.lookup[b])
                    : null != b.id
                    ? (c = a.lookup[b.id])
                    : (null != b.target || d.isElement(b)) && ((c = a.elements.indexOf(b.target || b)), c < 0 && ((b = b.target || b), (c = null))),
                null === c &&
                    (null != b.target && null != b.prodibiImage
                        ? (c = a.lookup[b.prodibiImage.imageSource.src])
                        : null != b.prodibiImage
                        ? (c = a.lookup[b.prodibiImage.imageSource.src])
                        : null != b.imageSource
                        ? (c = a.lookup[b.imageSource.src])
                        : ((b = d.getDataAttribute(b, "prodibi")), null != b && (c = a.lookup[b.id]))),
                null == c && (c = 0),
                Math.max(0, Math.min(c, a.models.length - 1))
            );
        }
        var n = b.getResizeThrottler();
        l.prototype = {
            add: function (a) {
                (self = this), null == a.length && (a = [a]);
                for (var b, c, e, f, g = self.elements || [], h = self.models || [], i = self.lookup || {}, j = a.length, k = 0; k < j; ++k)
                    if (
                        ((e = c = null),
                        (b = a[k]),
                        d.isElement(b)
                            ? ((c = ("CANVAS" === b.tagName ? b : b.getElementsByTagName("canvas")[0]) || b), (e = c.prodibi || (c.prodibiImage || {}).settings || d.getDataAttribute(c, "prodibi")))
                            : ((e = "image" === b.type ? b.settings : b), (c = e.root), null != c && (c = ("CANVAS" === c.tagName ? c : c.getElementsByTagName("canvas")[0]) || c)),
                        null != e && ((e.mediaView || {}).thumbnail !== !1 && null != c && c.addEventListener("click", self.openHandler, !1), (f = e.id), null == i[f]))
                    ) {
                        (i[f] = h.length), null != c && g.push(c);
                        var l = d.clone({}, e);
                        delete l.mediaView, h.push(l), null != (e.mediaView || {}).openTriggers && d.addTriggers(e.mediaView.openTriggers, !0, self.openHandler);
                    }
                null != self.settings.openTriggers && d.addTriggers(self.settings.openTriggers, !0, self.openHandler), (self.elements = g), (self.models = h), (self.lookup = i);
            },
            getChangeDuration: function () {
                return Math.max(500, Math.ceil((900 * this.viewer.offsetWidth) / 1920));
            },
            initialize: function () {
                var a = this,
                    b = a.settings;
                (a.viewer = f.buildMediaView(a.models.length > 1 || null != b.mediaGroup, !a.settings.keepOpen, b)),
                    (a.downloadHelper = new h(
                        a.viewer,
                        a.settings,
                        function () {
                            return a.models[a.currentIndex];
                        },
                        function () {
                            null != a.infoMenu && (a.viewer.removeChild(a.infoMenu), (a.infoMenu = null));
                        },
                        !0
                    )),
                    (a.downloadHandler = a.downloadHelper.onDownload.bind(a.downloadHelper)),
                    document.body.contains(a.viewer) || document.body.appendChild(a.viewer),
                    (a.title = a.viewer.querySelector("[data-prodibi-title]")),
                    (a.download = a.viewer.querySelector("[data-prodibi-download]")),
                    (a.info = a.viewer.querySelector("[data-prodibi-info]")),
                    (a.favoriteButton = a.viewer.querySelector("[data-prodibi-favorite]")),
                    (a.sliderCursors = a.viewer.querySelectorAll("[data-prodibi-progress]")),
                    (a.zoomOutHideElements = a.viewer.querySelectorAll("[data-prodibi-zoomout-hide]")),
                    (a.current = document.createElement("canvas")),
                    a.viewer.insertBefore(a.current, a.viewer.firstChild),
                    a.connectEvents(!0),
                    b.startOpen && a.open(),
                    d.forEach(a.viewer.querySelectorAll(".touchTarget, .touchTargetLeft, .touchTargetRight"), function (a) {
                        null == a.getAttribute("data-prodibi-close") && c.addAnimationOnClick(a, "cbutton--effect-ivana");
                    });
            },
            connectEvents: function (a) {
                for (var b, c = this, d = c.commands, e = c.commands.length, f = c.viewer, g = c.commandHandlers, h = 0; h < e; ++h) {
                    b = g[h];
                    for (var i = f.querySelectorAll("[data-prodibi-" + d[h] + "]"), j = 0; j < i.length; j++) a ? i[j].addEventListener("click", b, !1) : i[j].removeEventListener("click", b, !1);
                }
                a
                    ? (c.download.addEventListener("click", c.downloadHandler, !1), c.info.addEventListener("click", c.infoHandler, !1))
                    : (c.download.removeEventListener("click", c.downloadHandler, !1), c.info.removeEventListener("click", c.infoHandler, !1));
            },
            onInfo: function () {
                var a = this,
                    b = a.models[a.currentIndex];
                a.downloadHelper.close(),
                    null != a.infoMenu
                        ? (a.viewer.removeChild(a.infoMenu), (a.infoMenu = null))
                        : ((a.infoMenu = f.buildInfo(b)), (a.infoMenu.className += " prodibi_mediaview_info"), a.infoMenu.style.setProperty("background", i.controlsBackground, "important"), a.viewer.appendChild(a.infoMenu));
            },
            getNextIndex: function () {
                return (this.currentIndex + 1) % this.models.length;
            },
            getPreviousIndex: function () {
                return this.currentIndex - 1 < 0 ? this.models.length - 1 : this.currentIndex - 1;
            },
            setToNextIndex: function () {
                this.currentIndex = this.getNextIndex();
            },
            setToPreviousIndex: function () {
                this.currentIndex = this.getPreviousIndex();
            },
            saveScrollPosition: function () {
                (self.lastHTMLOverflowY = document.documentElement.style.overflowY),
                    (document.documentElement.style.overflowY = "hidden"),
                    (self.lastBODYOverflowY = document.body.style.overflowY),
                    (document.body.style.overflowY = "hidden");
            },
            restoreScrollPosition: function () {
                (document.documentElement.style.overflowY = self.lastHTMLOverflowY), (document.body.style.overflowY = self.lastBODYOverflowY);
            },
            open: function (a) {
                if ((null != a && (null != a.stopPropagation && a.stopPropagation(), null != a.stopImmediatePropagation && a.stopImmediatePropagation(), null != a.preventDefault && a.preventDefault()), this.visible)) return !1;
                var e = this;
                (e.visible = !0), e.saveScrollPosition(), (e.viewer.style.display = "block");
                var f = function () {
                    if (
                        ((e.currentIndex = m(e, a)),
                        (e.current = e.setupMediaItem(e.currentIndex, !1, null)),
                        e.updateUI(),
                        e.zoom({ stopPropagation: function () {} }),
                        b.dispatchEvent(document.body, "prodibi.mediaView.open", { mediaView: e }),
                        e.settings.openAnimation)
                    ) {
                        var d = c.create();
                        d.fade(e.viewer, e.settings.enableFullScreen === !0 ? 300 : 500, e.openCallback.bind(e), !0);
                    } else (e.viewer.style.opacity = 1), e.openCallback();
                };
                e.settings.enableFullScreen === !0 ? d.requestFullScreen(e.viewer, f) : f();
            },
            openCallback: function () {
                var a = this,
                    b = a.models.length;
                a.settings.keyboardControls && window.addEventListener("keydown", a.keyDownHandler, !1),
                    1 !== b && ((a.previous = a.setupMediaItem(a.getPreviousIndex(), !0, !0)), (a.next = 2 === b ? a.previous : a.setupMediaItem(a.getNextIndex(), !0, !1)));
            },
            favorite: function () {
                var b = this,
                    c = b.models[b.currentIndex];
                if (null != b.favoriteButton) {
                    a.favorites = a.favorites || {};
                    var d = c.id,
                        e = b.favoriteButton.querySelector("img");
                    a.favorites[d] > 0 ? ((a.favorites[d] = 0), (e.src = f.svgUrl("heart_empty.svg"))) : ((a.favorites[d] = 1), (e.src = f.svgUrl("heart.svg"))), null != window.Prodibi.updateRattings && window.Prodibi.updateRattings();
                }
            },
            close: function () {
                if (this.visible) {
                    var a = this;
                    if (a.settings.keepOpen) return void b.dispatchEvent(document.body, "prodibi.mediaView.close", { mediaView: a });
                    a.settings.enableFullScreen === !0 && d.cancelFullScreen(),
                        a.settings.keyboardControls && window.removeEventListener("keydown", a.keyDownHandler, !1),
                        (a.visible = !1),
                        a.restoreScrollPosition(),
                        (a.viewer.style.display = "none"),
                        (a.viewer.style.opacity = 0),
                        b.dispatchEvent(document.body, "prodibi.mediaView.close", { mediaView: a }),
                        a.closeCallback();
                }
            },
            closeCallback: function () {
                var a = this;
                a.tearDownMediaItem(a.current), a.tearDownMediaItem(a.previous), a.tearDownMediaItem(a.next), (a.previous = a.next = null);
            },
            setupMediaItem: function (a, b, c) {
                var e,
                    f = this,
                    g = f.models[a];
                return (e = b ? document.createElement("canvas") : f.current), d.clone(g, f.settings.fullScreenAttributes), f.setupCanvas(e, g, c), e;
            },
            setupCanvas: function (b, c, d) {
                var e = this,
                    f = "translateX(" + (d ? -100 : null == d ? 0 : 100) + "%)",
                    g = b.style;
                (g.position = "absolute"),
                    (g.top = 0),
                    (g.left = 0),
                    (g.msTransform = f),
                    (g.mozTransform = f),
                    (g.webkitTransform = f),
                    (g.transform = f),
                    (g.opacity = null == d ? 1 : 0),
                    (g.display = null == d ? "block" : "none"),
                    e.viewer.insertBefore(b, e.viewer.firstChild),
                    a.image(b, c),
                    b.addEventListener("prodibi.image.zoom", e.zoomHandler, !1);
            },
            tearDownMediaItem: function (a) {
                if (null !== a) {
                    var b = this;
                    b.tearDownCanvas(a);
                }
            },
            tearDownCanvas: function (a) {
                null != a && (null != a.prodibiImage && (a.prodibiImage.dispose(), (a.prodibiImage = null)), (a.width = a.height = 1), a.removeEventListener("prodibi.image.zoom", this.zoomHandler, !1));
            },
            zoom: function (a) {
                if (this.visible) {
                    a.stopPropagation();
                    var b = this,
                        c = b.current,
                        e = c.prodibiImage,
                        f = e.getZoom();
                    d.removeClass(c, "prodibi_zoomIn", "prodibi_zoomOut");
                    var g;
                    f < 100
                        ? ((g = function (a) {
                              d.removeClass(a, "hide");
                          }),
                          d.addClass(c, "prodibi_zoomIn"))
                        : ((g = function (a) {
                              d.addClass(a, "hide");
                          }),
                          d.addClass(c, "prodibi_zoomOut")),
                        b.zoomOutHideElements && d.forEach(b.zoomOutHideElements, g),
                        b.sliderCursors &&
                            d.forEach(b.sliderCursors, function (a) {
                                a.innerHTML = Math.round(f) + "%";
                            });
                }
            },
            zoomIn: function (a) {
                this.visible && (a.stopPropagation(), this.current.prodibiImage.zoom(-2));
            },
            zoomOut: function (a) {
                this.visible && (a.stopPropagation(), this.current.prodibiImage.zoom(2));
            },
            getOpposite: function (a) {
                return "next" === a ? "previous" : "next";
            },
            updateUI: function () {
                var b = this,
                    c = b.models[b.currentIndex],
                    d = b.viewer.querySelector("[data-prodibi-title]");
                null != d && (b.settings.showName ? (d.textContent = c.name || "") : (d.textContent = c.title || ""));
                var e = b.viewer.querySelector("[data-prodibi-download]");
                e.style.display = c.isDownloadEnabled > 0 || b.settings.isDownloadEnabled > 0 ? "block" : "none";
                var g = !k(c.description) || null != c.focal || null != c.aperture || null != c.speed || null != c.iso || null != c.lens || null != c.camera,
                    h = b.viewer.querySelector("[data-prodibi-info]");
                if (((h.style.display = g ? "block" : "none"), null != b.infoMenu && (b.viewer.removeChild(b.infoMenu), (b.infoMenu = null)), null != b.favoriteButton)) {
                    a.favorites = a.favorites || {};
                    var i = c.id,
                        j = b.favoriteButton.querySelector("img");
                    a.favorites[i] > 0 ? (j.src = f.svgUrl("heart.svg")) : (j.src = f.svgUrl("heart_empty.svg"));
                }
                b.downloadHelper.close();
            },
            change: function (a) {
                var d = this;
                if (d.visible && !d.animating && null !== d[a]) {
                    (d.animating = !0), d.viewer.insertBefore(d[a], d.viewer.firstChild);
                    var e = d.current,
                        f = d[a];
                    d.current = f;
                    var g = d.getChangeDuration(),
                        h = c.create();
                    "next" === a
                        ? (d.setToNextIndex(), h.slideReplace(e, f, g, d.changeCallbackOnOldMediaItem.bind(d, "next", [e, f]), d.changeCallbackOnNewMediaItem.bind(d), !0))
                        : (d.setToPreviousIndex(), h.slideReplace(e, f, g, d.changeCallbackOnOldMediaItem.bind(d, "previous", [e, f]), d.changeCallbackOnNewMediaItem.bind(d), !1)),
                        d.updateUI(),
                        b.dispatchEvent(document.body, "prodibi.mediaView.change", { mediaView: d, old: e, new: f });
                }
            },
            changeCallbackOnOldMediaItem: function (a, b) {
                var c = this,
                    d = c.models.length;
                if ((c.viewer.removeChild(b[0]), c.visible)) {
                    if (d > 3) {
                        c.tearDownMediaItem(c[c.getOpposite(a)]);
                        var e,
                            f = null;
                        "next" === a ? ((e = c.getNextIndex()), (f = !1)) : ((e = c.getPreviousIndex()), (f = !0)), (c[a] = c.setupMediaItem(e, !0, f));
                    } else 3 === d && (c[a] = c[c.getOpposite(a)]);
                    (c[c.getOpposite(a)] = b[0]), c[c.getOpposite(a)].prodibiImage.fit(), 2 === d && (c[a] = c[c.getOpposite(a)]);
                }
            },
            changeCallbackOnNewMediaItem: function () {
                var a = this;
                a.visible && a.zoom({ stopPropagation: function () {} }), (a.animating = !1);
            },
            onKeydown: function (a) {
                var b = this;
                b.visible && (37 === a.keyCode ? b.change("previous") : 39 === a.keyCode ? b.change("next") : 27 === a.keyCode ? b.close() : 107 === a.keyCode ? b.zoomIn(a) : 109 === a.keyCode && b.zoomOut(a));
            },
            dispose: function () {
                var a = this;
                a.connectEvents(!1);
                for (var b = a.elements.length, c = 0; c < b; ++c) a.elements[c].removeEventListener("click", a.openHandler, !1);
                if (null != a.models) {
                    b = a.models;
                    for (var c = 0; c < b; ++c) {
                        var e = a.models[c];
                        null != e.mediaView && null != e.mediaView.openTriggers && d.addTriggers(e.mediaView.openTriggers, !1, a.openHandler);
                    }
                }
                null != a.settings.openTriggers && d.addTriggers(a.settings.openTriggers, !1, a.openHandler), a.close(), a.viewer.parentNode && a.viewer.parentNode.removeChild(a.viewer);
            },
        };
        var o = {};
        (a.thumbnailMediaView = function (a, b) {
            function c(a, c) {
                var g = a.value;
                if (null != g && 0 !== g.length) {
                    if (c.settings.thumbnail !== !1) {
                        var h = a.cover || g[0],
                            i = d.defaults(c.settings.cover, h);
                        if (((i.title = a.title), (i.description = a.description), i.showTitle === !0)) {
                            var j = a.title || a.name,
                                k = c.settings.root.querySelector(".prodibi-placeholder-title");
                            null != k && (k.innerHTML = j);
                        }
                        if ("wrap" === b.layout) {
                            var l = f.buildInfo(i, Prodibi.getSettings());
                            null !== l && c.settings.root.appendChild(l), e.push({ type: "image", elements: c.settings.root, settings: i });
                            var m = function () {
                                l.style.width = c.settings.root.querySelector("canvas[data-prodibi]").offsetWidth + "px";
                            };
                            n.addHandler(m), m(), window.addEventListener("resize", m, !1);
                        } else e.push({ type: "image", elements: c.settings.root, settings: i });
                        c.settings.openTriggers = d.triggers(c.settings.root, c.settings.openTriggers);
                    }
                    e.push({ type: "mediaView", elements: g, settings: d.defaults(a, c.settings) });
                }
            }
            var e = (window.prodibiAsync = window.prodibiAsync || []);
            return (
                null == b && (b = {}),
                null == a && null != b.container
                    ? (j().getPublicContainer(b.account || Prodibi.getSettings().account, b.container, { settings: b }, c, null), null)
                    : (b.thumbnail !== !1 && ((b.cover = b.cover || a[0]), e.push({ type: "image", elements: canvas, settings: b.cover }), (b.openTriggers = d.triggers(null, b.openTriggers))),
                      void e.push({ type: "mediaView", elements: a, settings: b }))
            );
        }),
            d.defaults(a, {
                MediaView: l,
                mediaView: function (a, b) {
                    if (null != b && null != b.mediaGroup) {
                        var c = o[b.mediaGroup];
                        return null == c && ((c = new l(a, b)), (o[b.mediaGroup] = c)), c.add(a), c;
                    }
                    return new l(a, b);
                },
            });
    })(Prodibi, Prodibi.event, Prodibi.animate, Prodibi.extensions, window.Prodibi.Api, Prodibi.template, Prodibi.source, window.Prodibi.DownloadHelper, window.Prodibi.variables),
    (window.Prodibi.virtualization = (function (a, b, c, d) {
        function e() {
            return null === l && (l = new i()), l;
        }
        function f() {
            var a = this,
                b = a.viewportY();
            if (a.lastViewportY !== b) {
                null === a.lastViewportY && (a.lastViewportY = b);
                var c = a.lastViewportY - b;
                return c > 0 ? void (a.lastViewportY = b) : void (Math.abs(c) < 200 || ((a.lastViewportY = b), a.applyStrategyInternal()));
            }
        }
        function g() {
            var a = this;
            if (a.windowInnerWidth !== window.innerWidth) {
                for (var b = 0; b < a.grids.length; ++b) (a.grids[b].elements = null), (a.grids[b].index = 0);
                a.lastViewportY = null;
            }
        }
        function h(a, b) {
            var c = getComputedStyle(a),
                d = "absolute" === c.position,
                e = b ? /(auto|scroll|hidden)/ : /(auto|scroll)/;
            if ("fixed" === c.position) return document.body;
            for (var f = a; (f = f.parentElement); ) if (((c = getComputedStyle(f)), (!d || "static" !== c.position) && e.test(c.overflow + c.overflowY + c.overflowX))) return f;
            return document.body;
        }
        function i(c) {
            var e = this;
            if (
                ((e.root = c || null),
                (e.grids = []),
                (e.elements = []),
                (e.setupElement = a.prodibiImageSetup),
                (e.teardownElement = b.tearDownCanvas),
                (e.windowInnerWidth = window.innerWidth),
                (e.lastViewportY = null),
                (e.scrollElement = null != e.root && "scroll" === window.getComputedStyle(c).overflowY ? e.root : window),
                (e.applyStrategy = f.bind(e)),
                (e.resizeHandler = g.bind(e)),
                k.addFirstHandler(e.resizeHandler),
                (e.scrollThrottler = new d.EventThrottler({ element: e.scrollElement, eventName: "scroll", minDeltaTime: 0.3 })),
                e.scrollThrottler.addFirstHandler(e.applyStrategy),
                e.scrollThrottler.connect(),
                e.scrollElement !== window)
            ) {
                var i = h(e.scrollElement.parentElement, !1);
                (e.parentScrollThrottler = new d.EventThrottler({ element: i, eventName: "scroll", minDeltaTime: 0.3 })), e.parentScrollThrottler.addFirstHandler(e.applyStrategy), e.parentScrollThrottler.connect();
            }
        }
        function j(a) {
            var b = a.querySelectorAll("canvas[data-prodibi]");
            return (
                (b = null == Array.from ? [].slice.call(b) : Array.from(b)),
                b.sort(function (a, b) {
                    return a.prodibiOffsetBottom - b.prodibiOffsetBottom;
                }),
                b
            );
        }
        var k = d.getResizeThrottler(),
            l = null;
        return (
            (i.prototype.dispose = function () {
                var a = this;
                null != a.scrollThrottler && a.scrollThrottler.dispose(), null != a.parentScrollThrottler && a.parentScrollThrottler.dispose(), k.removeHandler(a.resizeHandler);
            }),
            (i.prototype.viewportY = function () {
                var a = this;
                return null == a.root ? c.viewportY() : a.root.scrollTop;
            }),
            (i.prototype.addGrid = function (a) {
                for (var b = this, c = 0; c < b.grids.length; ++c)
                    if (b.grids[c].grid === a) {
                        b.grids.splice(c, 1);
                        break;
                    }
                b.grids.push({ grid: a, elements: j(a), index: 0 }), b.applyStrategyInternal();
            }),
            (i.prototype.removeGrid = function (a) {
                for (var b = this, c = 0; c < b.grids.length; ++c)
                    if (b.grids[c].grid === a) {
                        b.grids.splice(c, 1);
                        break;
                    }
            }),
            (i.prototype.applyStrategyInternal = function () {
                for (var a = this, b = c.innerHeight(), d = 3 * b, e = 0; e < a.grids.length; ++e) {
                    var f = a.grids[e],
                        g = f.grid.getBoundingClientRect(),
                        h = g.top,
                        i = f.elements;
                    null == i && (i = f.elements = j(f.grid));
                    for (var k = f.index; k < i.length; ++k) {
                        var l = i[k];
                        if (null == l.prodibiimage) {
                            var m = h + l.prodibiOffsetBottom;
                            if ((m <= d && a.setupElement(l), m > d)) {
                                f.index = k;
                                break;
                            }
                        }
                    }
                }
            }),
            { ObjectAllocationManager: i, getObjectAllocationManager: e }
        );
    })(window.Prodibi, window.Prodibi.core, window.Prodibi.extensions, Prodibi.event)),
    (function (a, b, c, d, e, f, g, h, i) {
        "use strict";
        function j() {
            return g || window.Prodibi.Api;
        }
        function k(a) {
            var b = Math.min(10, a.length),
                c = 0,
                d = 0;
            for (c; c < b; ++c) a[c].height > a[c].width && d++;
            return d > b / 2 ? "column" : "row";
        }
        function l(a) {
            for (var c = this, d = c.root, e = d.querySelectorAll("canvas[data-prodibi]"), f = 0; f < e.length; ++f) b.tearDownCanvas(e[f]);
            if (a !== !1) for (; d.firstChild; ) d.removeChild(d.firstChild);
        }
        function m(a) {
            var b = this,
                a = b.root;
            null != b.virtualization ? (b.virtualization.dispose(), (b.virtualization = null)) : c.getObjectAllocationManager().removeGrid(a);
        }
        function n(a) {
            var b = this,
                c = b.root;
            y.removeHandler(b.resizeHandler), b.clearVirtualization(), b.clear(a), null != b.mediaView && b.mediaView.dispose(), (b.mediaView = null), (c.prodibiGrid = null);
        }
        function o() {
            var a = this;
            a.windowInnerWidth !== window.innerWidth && ((a.windowInnerWidth = window.innerWidth), (a.root.style.width = ""), a.clearVirtualization(), a.clear(), a.doGrid());
        }
        function p(a) {
            var b = this.settings;
            if (h.computeBranding(null, b.branding, null, 1) && "wrap" !== b.layout) {
                var c = h.buildBrand(!0);
                b.showTitle === !0 && (c.className += " prodibi_brand_top"), a.appendChild(c);
            }
        }
        function q(a, b) {
            var c = this,
                d = h.buildMediaViewHeader(c.settings.showBackButton || !1, !0, !0, !1, !1, ""),
                e = d.querySelector("[data-prodibi-download]");
            (e.style.display = c.settings.isDownloadEnabled > 0 ? "block" : "none"),
                (c.downloadHelper = new i(
                    a,
                    c.settings,
                    function () {
                        return c.settings;
                    },
                    function () {},
                    !1
                )),
                e.addEventListener("click", c.downloadHelper.onDownload.bind(c.downloadHelper), !1),
                b.appendChild(d);
        }
        function r(b) {
            var e = this,
                g = b.querySelectorAll("canvas[data-prodibi]");
            if (
                (null != e.settings && e.settings.virtualize === !0
                    ? null != b.parentNode && "scroll" === window.getComputedStyle(b.parentNode).overflowY
                        ? (null == e.virtualization && (e.virtualization = new c.ObjectAllocationManager(b.parentNode)), e.virtualization.addGrid(b))
                        : c.getObjectAllocationManager().addGrid(b)
                    : a.image(g),
                e.settings.mediaView !== !1)
            )
                if ("boolean" == typeof e.settings.mediaView) e.mediaView = new d(g, f.defaults(e.settings.mediaViewSettings, e.settings));
                else {
                    var h = e.settings.mediaView || {},
                        i = e.settings.mediaViewSettings || {};
                    e.mediaView = new d(g, f.defaults(f.defaults(h, i), e.settings));
                }
        }
        function s() {
            var a = this;
            (a.windowInnerWidth = window.innerWidth), (a.virtualization = null), (a.root.prodibiGrid = a), (a.resizeHandler = a.resize.bind(a)), y.addHandler(a.resizeHandler);
        }
        function t(b) {
            var c = a.Grid[b],
                d = c.prototype;
            return (
                (d.init = d.init || s),
                (d.addMediaView = d.addMediaView || r),
                (d.addHeader = d.addHeader || q),
                (d.addBranding = d.addBranding || p),
                (d.resize = d.resize || o),
                (d.dispose = d.dispose || n),
                (d.clear = d.clear || l),
                (d.clearVirtualization = d.clearVirtualization || m),
                c
            );
        }
        function u(a) {
            var b = a.gridType || "auto";
            return z[b] || "auto";
        }
        function v(a, b, c) {
            (c = f.defaults(a, c)), (c.showTitle = !1), (c.mediaView = !0);
            var d = h.buildGridView();
            c.root = d.querySelector("[data-prodibi-grid-root]") || d;
            var e = d.querySelector("[data-prodibi-download]");
            if (c.isDownloadEnabled > 0) {
                e.style.display = "block";
                var g = new i(
                    d,
                    c,
                    function () {
                        return c;
                    },
                    function () {},
                    !1
                );
                e.addEventListener("click", g.onDownload.bind(g), !1);
            } else e.style.display = "none";
            (window.prodibiLastHTMLOverflowY = document.documentElement.style.overflowY),
                (document.documentElement.style.overflowY = "hidden"),
                (window.prodibiLastBODYOverflowY = document.body.style.overflowY),
                (document.body.style.overflowY = "hidden"),
                (d.style.display = "block"),
                document.body.appendChild(d),
                prodibiAsync.push({ type: "grid", elements: b, settings: c }),
                null != c && null != c.openCallback && c.openCallback();
        }
        function w(a, b, c) {
            var d = f.triggers(c.root, c.openTriggers);
            f.addTriggers(d, !0, v.bind(null, a, b, c));
        }
        function x(a) {
            return encodeURIComponent(a).replace("%", "$").replace("(", "$28").replace(")", "$29").replace("*", "$2A").replace("!", "$21").replace("%", "$");
        }
        var y = e.getResizeThrottler(),
            z = { auto: "auto", google: "row", ultranoir: "row", android: "auto", row: "row", column: "column", collage: "collage", "500px": "collage", px: "collage", square: "collage" };
        (a.grid = function (b, c, d) {
            if (((c = c || {}), (d = d || c.root), null == b && null != c.container))
                return (
                    j().getPublicContainer(
                        c.account || a.getSettings().account,
                        c.container,
                        { settings: f.defaults(c, a.getSettings()) },
                        function (b, c) {
                            var e = (c || {}).settings || {},
                                g = b.value || [],
                                h = null;
                            if (
                                (null != e.orderBy &&
                                    (g = g.sort(function (a, b) {
                                        return (a[e.orderBy] || "").localeCompare(b[e.orderBy] || "");
                                    })),
                                null != g && g.length > 0 && e.showFavorite === !0)
                            )
                                for (var i = (a.favorites = a.favorites || {}), j = 0; j < g.length; ++j) (h = g[j]), null != h.rating && h.rating > 0 && (i[h.id] = h.rating);
                            b.gridType = e.gridType || b.gridType;
                            var l = u(b);
                            "auto" === l && (l = k(g)), new (t(l))(d, g, f.defaults(e, b));
                        },
                        null
                    ),
                    null
                );
            var e = u(c);
            "auto" === e && (e = k(b)), new (t(e))(d, b, f.defaults(c, a.getSettings()));
        }),
            (a.Grid = {
                getGridType: function (a) {
                    return z[a] || "auto";
                },
            }),
            (a.album = a.thumbnailGrid = function (b, c) {
                (c = c || {}), (c.showBackButton = !0);
                c.root;
                if (null == b && null != c.container)
                    return (
                        j().getPublicContainer(
                            c.account || a.getSettings().account,
                            c.container,
                            { settings: c },
                            function (a, b) {
                                var c = a.value;
                                if (null != c && 0 !== c.length) {
                                    if (b.settings.thumbnail !== !1) {
                                        var d = a.cover || c[0],
                                            e = f.defaults(b.settings.cover, d);
                                        if (((e.title = a.title), (e.description = a.description), e.showTitle === !0)) {
                                            var g = a.title || a.name,
                                                h = b.settings.root.querySelector(".prodibi-placeholder-title");
                                            null != h && (h.innerHTML = g);
                                        }
                                        prodibiAsync.push({ type: "image", elements: b.settings.root, settings: e });
                                    }
                                    b.settings.openOnLoad === !0 ? v(a, c, b.settings) : w(a, c, b.settings);
                                }
                            },
                            null
                        ),
                        null
                    );
            }),
            (a.containersGrid = a.albumsGrid = function (b, c) {
                if (null != b && 0 !== b.length) {
                    null == c && (c = {});
                    var d = {},
                        e =
                            "&$filter=" +
                            b
                                .map(function (a) {
                                    var b = a.settings.container;
                                    return (d[b] = a.settings), "id eq '" + x(b) + "'";
                                })
                                .join(" or ");
                    g.getPublicContainers(
                        c.account || a.getSettings().account,
                        e,
                        { elements: b, settings: c, containerSettingsLookup: d },
                        function (a, b) {
                            var c = b.containerSettingsLookup;
                            a = a.value;
                            var d = [];
                            a.forEach(function (a) {
                                var b = a.value;
                                if (null != b && 0 !== b.length) {
                                    var e = c[a.id] || c[a.name],
                                        g = f.clone({}, a.cover || b[0]);
                                    (g.favorite = (e.cover || {}).favorite), (g.settings = f.defaults(a, e)), (g.title = g.name = null), d.push(g);
                                }
                            }),
                                (b.settings.mediaView = !1),
                                prodibiAsync.push({ type: "grid", elements: d, settings: b.settings });
                            for (var e = b.settings.root.querySelectorAll(".prodibi_element"), g = 0; g < e.length; ++g) {
                                var h = e[g].prodibiSettings,
                                    i = f.defaults(h.settings, b.settings);
                                (i.root = e[g]), w(h.element.settings, h.element.settings.value, i);
                            }
                            null != b.settings && null != b.settings.renderCallback && b.settings.renderCallback();
                        },
                        null
                    );
                }
            });
    })(window.Prodibi, window.Prodibi.core, window.Prodibi.virtualization, window.Prodibi.mediaView, window.Prodibi.event, window.Prodibi.extensions, window.Prodibi.Api, window.Prodibi.template, window.Prodibi.DownloadHelper),
    (function (a, b, c, d, e, f, g) {
        function h(a, b, c) {
            var d = this;
            (d.root = a), (d.images = b), (d.settings = c), (d.downloadHelper = null), (d.windowInnerWidth = null), d.init(), (a.className += " prodibi prodibi_flex prodibi_gridColumn"), d.doGrid();
        }
        function i(a) {
            for (var b = 0, c = a.length, d = 1; d < c; ++d) a[d] < a[b] && (b = d);
            return b;
        }
        (h.prototype.doGrid = function () {
            var c = this,
                d = c.root,
                e = c.settings,
                f = c.images,
                g = document.createDocumentFragment();
            c.windowInnerWidth = b.innerWidth();
            var h = b.getElementInnerWidth(d),
                j = b.computeMargin(e.margin || 0, h);
            d.style.width = h + "px";
            for (var k = null != e.columnCount ? e.columnCount : Math.max(2, Math.round((2.25 * h) / window.innerHeight)), l = Math.floor((h - (k - 1) * j) / k), m = [], n = [], o = null, p = 0; p < k; ++p)
                (o = document.createElement("div")), (o.style.width = l + "px"), m.push(o), n.push(0), g.appendChild(o);
            for (var q = null, r = f.length, s = 0, t = null, u = 0, p = 0; p < r; ++p) {
                (q = f[p]), (u = (q.height / q.width) * l), (s = i(n));
                var v = n[s];
                n[s] += u;
                var w = n[s];
                (t = a.buildElement(null, q, e, !1, v, w)), (t.style.minHeight = t.style.height = u + "px"), (t.style.marginBottom = j + "px"), m[s].appendChild(t);
            }
            for (var p = 0; p < k; ++p) null !== m[p].lastChild && (m[p].lastChild.style.marginBottom = "");
            c.addBranding(g), c.addHeader(d, g), d.appendChild(g), c.addMediaView(d);
        }),
            (f.column = h);
    })(window.Prodibi.template, window.Prodibi.extensions, window.Prodibi.event, window.Prodibi.core, window.Prodibi.mediaView, window.Prodibi.Grid, window.Prodibi.DownloadHelper),
    (function (a, b, c, d, e, f) {
        function g(a, b, c) {
            var d = this;
            (d.root = a), (d.images = b), (d.settings = c), (d.downloadHelper = null), (d.windowInnerWidth = null), (d.currentHeight = 0), d.init(), (a.className += " prodibi prodibi_flex prodibi_gridRow"), d.doGrid();
        }
        function h(a, b, c, d, e) {
            var f,
                g = 0,
                h = c - b;
            d -= (h - 1) * e;
            for (var i = b; i < c; ++i) (f = a[i]), (g += f.width / f.height);
            return Math.ceil(d / g);
        }
        (g.prototype.fillRow = function (b, c, d, e, f, g, h, i, j) {
            var k = this;
            if (i) {
                for (var l = 0, m = e; m < f; ++m) l += d[m].width / d[m].height;
                g = Math.min(g, Math.floor((j - (f - e - 1) * h) / l));
            }
            var n = document.createElement("div");
            (n.className = "prodibi_flex prodibi_gridRow_row"), (n.style.height = n.style.minHeight = g + "px");
            var o = k.currentHeight,
                p = o + g;
            k.currentHeight = p;
            for (var q = null, r = null, s = 0, t = 0, m = e; m < f; ++m) (q = d[m]), (t = Math.floor((g * q.width) / q.height)), (s += t), (r = a.buildElement(null, q, b, !1, o, p)), (r.style.width = t + "px"), n.appendChild(r);
            return i ? ((s += (f - e - 1) * h), (n.style.width = s + "px")) : (n.style.marginBottom = h + "px"), c.appendChild(n), n;
        }),
            (g.prototype.doGrid = function () {
                var a = this,
                    c = a.root,
                    d = a.settings,
                    e = a.images,
                    f = document.createDocumentFragment();
                a.currentHeight = 0;
                var g = b.getElementInnerWidth(c),
                    i = b.computeMargin(d.margin || 0, g),
                    j = Math.max(200, Math.round(window.innerHeight / 2.5)),
                    k = 0,
                    l = 0,
                    m = 0;
                a: for (; l < e.length; ) {
                    for (l = k + 1; l < e.length; ++l)
                        if (((m = h(e, k, l, g, i)), m < j)) {
                            a.fillRow(d, f, e, k, l, m, i, !1, g), (k = l);
                            continue a;
                        }
                    a.fillRow(d, f, e, k, l, j, i, !0, g);
                    break;
                }
                a.addBranding(f), a.addHeader(c, f), c.appendChild(f), a.addMediaView(c);
            }),
            (f.row = f.google = g);
    })(window.Prodibi.template, window.Prodibi.extensions, window.Prodibi.event, window.Prodibi.core, window.Prodibi.mediaView, window.Prodibi.Grid),
    (function (a, b, c, d, e, f) {
        function g(a, c, d) {
            var e = this;
            (e.root = a),
                (e.images = c),
                (e.settings = b.defaults(d, { margin: 5, columnCount: 4, patternProperty: "favorite" })),
                (e.downloadHelper = null),
                (e.windowInnerWidth = null),
                (e.currentHeight = 0),
                e.init(),
                (a.className += " prodibi prodibi_gridCollage"),
                e.doGrid();
        }
        var h = { o: 1, "#": 2, "-": 2, "|": 1 },
            i = { o: 1, "#": 2, "-": 1, "|": 2 };
        (g.prototype.setStyle = function (b, c, d, e, f, g, h) {
            var i = this,
                j = d * g + d * h,
                k = f * g + (f - 1) * h,
                l = j + k,
                m = a.buildElement(null, b, i.settings, !1, j, l);
            i.root.appendChild(m);
            var n = m.style;
            (n.left = c * g + c * h + "px"), (n.top = j + "px"), (n.width = e * g + (e - 1) * h + "px"), (n.height = k + "px");
        }),
            (g.prototype.setBlockStyle = function (a, b, c, d, e) {
                for (var f, g = this, j = g.settings.columnCount, k = 2 * j, l = (g.root, !1), m = 0; m < k; ++m)
                    if (((f = c[m]), null != f && "x" !== f)) {
                        var n = g.images[a.pop()];
                        if (null != n) {
                            var o = Math.floor(m / j),
                                p = h[f],
                                q = i[f];
                            g.setStyle(n, m % j, b + o, p, q, d, e);
                            for (var r = 0; r < p; ++r) (c[m + r] = "x"), 2 === q && (c[m + r + j] = "x");
                            2 === q ? (l = !0) : 0 === o && (l = !0);
                        }
                    }
                return l;
            }),
            (g.prototype.getPattern = function (a) {
                var b,
                    c,
                    d,
                    e = this,
                    f = e.settings.columnCount,
                    g = [],
                    j = e.images,
                    k = j.length,
                    l = 2 * f,
                    m = e.settings.patternProperty;
                for (c = 0; c < l; ++c) g.push("x");
                for (c = a, d = 0; c < k; ++c) {
                    for (; "x" !== g[d] && d < l; ) d++;
                    if (d >= l) break;
                    (b = j[c][m]), (null != b && "x" !== b) || (b = "o");
                    for (var n = h[b], o = i[b], p = 0; p < n; ++p) (g[d + p] = b), 2 === o && (g[d + p + f] = b);
                }
                return g;
            }),
            (g.prototype.doGrid = function () {
                var a,
                    c,
                    d = this,
                    e = d.root,
                    f = d.settings,
                    g = (d.images, document.createDocumentFragment()),
                    h = b.getElementInnerWidth(e),
                    i = b.computeMargin(f.margin || 0, h),
                    j = d.settings.columnCount,
                    k = (h - (j - 1) * i) / j,
                    l = 0,
                    m = d.images.length,
                    n = 0,
                    o = [],
                    p = !1;
                for (a = m - 1; a >= 0; --a) o.push(a);
                for (; o.length; ) (c = d.getPattern(o[o.length - 1])), (p = d.setBlockStyle(o, l, c.concat(), k, i)), (l += 2), p ? (n += 2) : n++;
                (d.root.style.height = k * n + (n - 1) * i + "px"), d.addBranding(g), d.addHeader(e, g), e.appendChild(g), d.addMediaView(e);
            }),
            (f.collage = f.px = f["500px"] = g);
    })(window.Prodibi.template, window.Prodibi.extensions, window.Prodibi.event, window.Prodibi.core, window.Prodibi.mediaView, window.Prodibi.Grid),
    (function (a, b, c, d, e) {
        function f(c, d) {
            (d = c || d), null != d && (l = b.defaults(d, l)), null != d.variables && a.setVariables(null, d.variables), (k = !0);
        }
        function g(a) {
            if (null != a) {
                var d;
                if (null == a.length) {
                    if (((d = a), null != d.prodibiImage)) return;
                    d.prodibiImage = new c(d, b.defaults(d.prodibi, l));
                } else for (var e = a.length, f = 0; f < e; ++f) (d = a[f]), null == d.prodibiImage && (d.prodibiImage = new c(d, b.defaults(d.prodibi, l)));
            }
        }
        function h(a, d, e) {
            if (((d = d || {}), k || f(a, d), b.registerForMediaView({ type: "image", elements: a, settings: d }) && b.addMediaViewCommands(), null == a && (a = d.root || (null != d.settings ? d.settings.root : null)), null != a)) {
                var g = null,
                    h = b.defaultsWithAttr,
                    i = l;
                a = null == a.length ? [a] : a;
                for (var j, m = a.length, n = 0; n < m; ++n)
                    (j = a[n]), null != j && "CANVAS" !== j.tagName && (j = j.getElementsByTagName("canvas")[0]), null == j.prodibiImage && ((g = h(j, "prodibi", d, i)), (j.prodibiImage = new c(j, g)));
            }
        }
        function i(b) {
            if (null != b)
                if ("prodibiimage" === b.type) a.image(b.elements, b);
                else if (null != b.type) {
                    var c = a[b.type];
                    null != c && c(b.elements, b.settings);
                } else a.image(b.elements, b);
        }
        function j() {}
        var k = !1,
            l =
                (d.getResizeThrottler(),
                {
                    account: null,
                    mode: "image",
                    widthMode: "parentInner",
                    heightMode: "parentInner",
                    position: "smart",
                    autoResize: !0,
                    density: "hdpi",
                    mediaView: !0,
                    layout: "overlay",
                    disableContextMenu: !0,
                    enablePanOnFirstZoom: !0,
                    zoomStep: 1,
                    s: 0,
                    virtualize: !1,
                });
        (j.prototype.push = i),
            b.defaults(a, {
                defaultSettings: l,
                image: h,
                prodibiImageSetup: g,
                settings: f,
                getSettings: function () {
                    return l;
                },
                action: function (a, b) {
                    null != b && null != b.action && b.action.call();
                },
            });
        var m = window.prodibiAsync;
        if (((window.prodibiAsync = new j()), null != m && null != m.length && m.length > 0)) {
            var n,
                o = m.length;
            if ("settings" !== m[0].type)
                for (n = 0; n < o; ++n)
                    if ("settings" === m[n].type) {
                        i(m[n]), m.splice(n, 1);
                        break;
                    }
            for (o = m.length, n = 0; n < o; ++n) i(m[n]);
        } else f({}, null);
    })(Prodibi, Prodibi.extensions, Prodibi.Image, Prodibi.event),
    (window.prodibiAsync = window.prodibiAsync || []),
    (null != window.prodibiAsync[0] && null != window.prodibiAsync[0].settings && window.prodibiAsync[0].settings.renderAll === !1) ||
        (null != Prodibi.getSettings && Prodibi.getSettings().renderAll === !1) ||
        window.prodibiAsync.push({ type: "renderAll" });
